/**
 * UserReplay Client Capture Library.
 * http://www.userreplay.com
 *
 * @version 2.11.0
 * @build f4e7039
 * @copyright 2017 User Replay Ltd.
 */
;(function () {(function(){var coreEventtarget,varConstants,utilsMatchsimplevalue,utilsMatchregexvalue,utilsExtract,utilsPluck,utilsTrim,utilsIndexof,utilsInarray,utilsIsstring,coreConfig,corePage,sessionInstance,varDomain,coreCookie,utilsExtend,utilsObj2query,varDocument,coreErrorhandler,coreMessaging,utilsPrototype,utilsUseragent,varXhr,utilsWwwformurlencode,cryptoJsCore,cryptoJsSha256,coreHashmanager,coreTransport,coreStorage,utilsRepeat,utilsStrpad,utilsBase,utilsRtime,utilsNumberformat,utilsUtf16,eventTypes,eventFpath,eventCache,scrubbingScrubutils,domNode,eventEvent,eventUserevent,eventMouse,utilsSelectnodes,domTriggermanager,scrubbingSelectorsDefaults,scrubbingSelectorsSelector,scrubbingSelectorsBlacklisted,scrubbingSelectorsWhitelisted,scrubbingManager,formfieldMetadata,utilsGetcomputedstyle,eventSubmit,domVirtualformmanager,domDomutils,coreCapture,sessionSession,varCallback,varIframes,utilsThrottle,eventSynth,eventFormfield,eventScroll,eventTouch,eventLoad,eventUnload,eventResize,domPagemapping,utilsSort,utilsToarray,statechangeMutationobserversObserver,statechangeMutationobserversAttributes,statechangeMutationobserversChildlist,statechangeMutationobserversCharacterdata,statechangeObservers,eventState,coreNewstep,eventHistory,utilsIsquerystr,triggerCapturetrigger,eventXhr,eventBindings,core,domPageupload,formfieldValidation,eventManualflag,triggerFlagtrigger,triggerTexttrigger,urcapture;coreEventtarget=function(){var e=function(){var e={};var t=function(){};t.prototype={fire:function(t){var r=Array.prototype.slice.call(arguments,1);if(!e[t]){return}for(var n in e[t]){if(e[t].hasOwnProperty(n)){e[t][n].apply(t,r)}}},on:function(t,r){if(typeof r==="function"){(e[t]=e[t]||[]).push(r)}}};return new t}();return e}();varConstants=function(){var e={captureMode:{DEFAULT:0,SIMPLE:1},STATE_CHANGE_ENGINE_OFF:-1,STATE_CHANGE_ENGINE_PAUSED:0,STATE_CHANGE_ENGINE_RUNNING:1,STATE_CHANGE_ENGINE_STOPPED:-1,ACTION_PAGE:"PAGE",ACTION_DOM_UPLOAD:"DOM",ACTION_PAGE_IFRAME:"IFRAME",ACTION_XHR:"AJAX",ACTION_FORM_SUBMIT:"FORM",ACTION_PAGE_PRECURSOR:"SIGNAL",ACTION_PAGE_UNLOAD:"UNLOAD",ACTION_EVENT:"EVENT2",ACTION_FORMMETA:"fORMMETA2",engineState:{INACTIVE:-1,INITIALISING:0,READY:1,BUSY:2,EXPIRED:3}};return e}();utilsMatchsimplevalue=function(e,t){return e===t};utilsMatchregexvalue=function(e,t){return e.test(t)};utilsExtract=function(e,t){return function(r,n,i,a){var s=[],o,u;for(var c=0;c<r.length;c++){u=r[c][n]instanceof RegExp?t:e;if(r[c].hasOwnProperty(n)&&u(r[c][n],i)){if(a){o=r.splice(c,1);s.push(o[0]);c--}else{s.push(r[c])}}}if(s.length===0){return null}return s.length>1?s:s[0]}}(utilsMatchsimplevalue,utilsMatchregexvalue);utilsPluck=function(e,t){var r=[];for(var n=0;n<e.length;n++){r.push(e[n][t])}return r.length>1?r:r[0]};utilsTrim=function(e){return e.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")};utilsIndexof=function(e,t){if(!e||e.length===0){return-1}for(var r=0;r<e.length;r++){if(e[r]===t){return r}}return-1};utilsInarray=function(e,t){return function(r,n){if(r.length<1){return false}if(e(r,n)!==-1){return true}for(var i=0;i<r.length;i++){if(r[i]instanceof RegExp){if(t(r[i],n)){return true}}}return false}}(utilsIndexof,utilsMatchregexvalue);utilsIsstring=function(e){return Object.prototype.toString.call(e)==="[object String]"};coreConfig=function(e,t,r,n,i,a,s,o){var u;var c=["id","server"];var d={fieldSelectors:[],xhr:{postParam:[],json:{requestBody:[],responseText:[]}}};var l={fieldSelectors:[],xhr:{postParam:[],json:{requestBody:[],responseText:[]}}};var f={xhr:[]};var h={mouseover:[],mouseout:[],click:[],focus:[],blur:[],change:[],keypress:[],attrchange:[],load:[],xhr:[]};var p={node:[],xhr:{responseText:[],requestBody:[]}};var g={attr:[],page:[],formAction:[],form:[],field:{id:[],name:["__VIEWSTATE"]},xhr:{json:{requestBody:[],responseText:[]},target:[],postParam:["__VIEWSTATE"],responseText:true},stateChanges:{attr:[]}};var v=[];var m=[];var y=[];var b=[];var w={page:[],iframe:[],any:[]};var E=[];var C=[];var S={allowedOrigins:[],allowXhrPlainTextResponses:false,angularHashPrefix:"!",angularPrettyUrls:true,angularRoutesToSteps:true,autoCapture:true,autoCaptureEvent:"DOMContentLoaded",autoCaptureDelay:0,animationReplayFidelity:100,bindToOnSubmit:false,captureComments:false,captureCookies:true,captureDimensions:true,captureEvents:true,captureForms:true,captureMode:t.captureMode.DEFAULT,captureReferrer:true,captureSource:true,captureSourceMaxSize:0,captureStateChanges:false,captureXhr:true,cookieName:"UrCapture",detectPropChanges:false,dnt:false,errorReporting:true,eventCacheFlushLimit:32768,formAnalysis:true,hashContent:false,id:undefined,iframes:false,ignoreReplaceState:true,ignoreWhitespaceTextNodes:true,mouseMovementSampleRate:250,passiveCapture:false,pageTimeout:20,pauseOnResize:true,pauseOnResizeCaptureMode:"ALL",s:undefined,scrubMask:"xX9*",scrubMode:"whitelist",scrubCardsPartial:true,server:undefined,stateChangeBatchingThreshold:0,stepsOnHistoryChange:true,storageDomain:null,storageTarget:null,suppressWhitespace:true,synthesizeScriptingChangeEvents:false,version:undefined,windowLoadTimeout:5e3,windowScrollSampleRate:250,useIECapture:true};function UrConfig(e,t,r){S.id=e;S.server=t;S.s=r;return u.init()}function T(){}T.prototype={constructor:UrConfig,init:function(){this.id=S.id;this.server=S.server;this.s=S.s;return this},get:function(e){if(!e){return S}return typeof S[e]==="undefined"?false:S[e]},set:function(e,t){if(S.hasOwnProperty(e)&&a(c,e)===-1){S[e]=t}return this},show:function(){return S},blacklistFields:function(e){l.fieldSelectors.push(e);return this},blacklistXhrPostParams:function(e){if(o(e)){e=[e]}for(var t=0,r=e.length;t<r;t++){if(a(l.xhr.postParam,e[t])===-1){l.xhr.postParam.push(e[t])}}return this},blacklistXhrJsonKeys:function(e,t){var r=["requestBody","responseText"];if(o(e)){e=[e]}if(!o(t)||a(r,t)===-1){return this}for(var n=0;n<e.length;n++){if(a(l.xhr.json[t],e[n])===-1){l.xhr.json[t].push(e[n])}}return this},getBlacklistedFieldSelectors:function(){return l.fieldSelectors},getBlacklistedXhrJsonKeys:function(e){return l.xhr.json[e]},getBlacklistedXhrPostParams:function(){return l.xhr.postParam},whitelistFields:function(e){d.fieldSelectors.push(e);return this},getWhitelistedFieldSelectors:function(){return d.fieldSelectors},addAutoCaptureRule:function(t,r,n,i){var s=["page","iframe"];var o=["load","DOMContentLoaded"];if(i&&a(s,i)===-1||!(t instanceof RegExp)||a(o,r)===-1||typeof n!=="number"){e.fire("error:raise",new Error,"Invalid config: addAutoCaptureRule");return this}if(!i){i="any"}w[i].push({event:r,pattern:t,delay:n});return this},getAutoCaptureRule:function(e,t){var n=w[t];var i=r(n.concat(w.any),"pattern",e);var a;if(!i){a={event:S.autoCaptureEvent,delay:S.autoCaptureDelay}}else if(i.length){a=i[0]}else{a=i}return a},addNodeEventTrigger:function(e,t,r,n,i,a,s){this.addNodeEventTriggerRule(urCapture.triggers.createCaptureTrigger(e,i,r,a,s),t,n);return this},addNodeEventTriggerRule:function(e,t,r,n){if(!document.URL.match(r)){return this}var i={type:e.type,selectors:t,trigger:e};if(n){e.runOnce=true}h[e.type].push(i);return this},addXhrEventTrigger:function(e,t,r,n){h.xhr.push({target:e,type:"xhr",capture:{selectors:t,mode:r||"html",delay:n||0}});return this},addWindowEventTrigger:function(e,t,r,n,i){if(!document.URL.match(t)){return this}h[e].push({type:e,capture:{selectors:r,mode:n||"html",delay:i||0}});return this},getXhrEventTrigger:function(e){try{var t=r(h.xhr,"target",e);if(t&&!Array.isArray(t)){t=[t]}return t||[]}catch(e){return[]}},excludeAttributes:function(e){if(typeof e==="string"){e=[].push(e)}g.attr=g.attr.concat(e);return this},getExcludedAttributes:function(){return g.attr},excludePage:function(t){if(!(t instanceof RegExp)){return this}try{if(a(g.page,t)===-1){g.page.push(t)}}catch(t){e.fire("error:raise",t,"core/config:excludePage")}return this},excludeFormAction:function(t){if(!(t instanceof RegExp)){return this}try{if(a(g.formAction,t)===-1){g.formAction.push(t)}}catch(t){e.fire("error:raise",t,"core/config:excludeFormAction")}return this},excludeXhr:function(t){if(!(t instanceof RegExp)){return this}try{if(a(g.xhr.target,t)===-1){g.xhr.target.push(t)}}catch(t){e.fire("error:raise",t,"core/config:excludeXhr")}return this},excludeXhrPostParam:function(t){if(o(t)){t=[t]}try{for(var r=0;r<t.length;r++){if(a(g.xhr.postParam,t[r])===-1){g.xhr.postParam.push(t[r])}}}catch(t){e.fire("error:raise",t,"core/config:excludeXhrPostParam")}return this},excludeXhrResponseText:function(e){g.xhr.responseText=e;return this},excludeStateChangesToElements:function(e){var t=e.split(",");if(t.length>0){for(var r=0;r<t.length;r++){if(a(v,t[r])===-1){v.push(t[r])}}}return this},getStateChangeExclusionSelectors:function(){return v},excludeAttrChanges:function(e){if(a(g.stateChanges.attr,e)){g.stateChanges.attr.push(e)}return this},excludeSubtreeChanges:function(e){if(a(g.stateChanges.subtree,e)){g.stateChanges.subtree.push(e)}return this},addNodeScrubbingRule:function(e,t){if(arguments.length===3){e=arguments[1];t=arguments[2]}if(document.URL.match(t)){p.node.push(e)}return this},getNodeScrubbingRules:function(){return p.node.join(",")},getNodeEventTriggers:function(){return{click:h.click,mouseover:h.mouseover,mouseout:h.mouseout,focus:h.focus,blur:h.blur,change:h.change,keypress:h.keypress,attrchange:h.attrchange}},addUploadTrigger:function(e,t,r){f[e].push({url:t,pause:r||100});return this},getUploadTriggers:function(e,t){return r(f.xhr,"url",t)},isPageExcluded:function(e){for(var t=0;t<g.page.length;t++){if(e.match(g.page[t])){return true}}return false},getAttrExclusions:function(){return g.stateChanges.attr},getSubtreeExclusions:function(){return g.stateChanges.subtree},isXhrExcluded:function(e){for(var t=0;t<g.xhr.target.length;t++){if(e.match(g.xhr.target[t])){return true}}return false},isXhrResponseTextExcluded:function(){return g.xhr.responseText},isFieldExcluded:function(e){var t=g.field.id.concat(g.field.name);return a(t,e)!==-1},isFieldWhitelisted:function(e){if(typeof e==="undefined"){return false}if(o(e)){e=e.split(" ")}for(var t=0;t<e.length;t++){if(s([].concat(d.fields.id,d.fields.name,d.fields.class),i(e[t]))){return true}}return false},addBeaconRule:function(t,r){if(!(t instanceof RegExp)||!(r instanceof RegExp)){e.fire("error:raise",new Error("InvalidArgument"),"config::addBeaconRule");return this}y.push({uaPattern:t,urlPattern:r});return this},isBeaconRequest:function(e){var t=r(y,"urlPattern",e);if(!t){return false}if(!t.length){t=[t]}for(var n=0,i=t.length;n<i;n++){if(t[n].uaPattern.test(navigator.userAgent)){return true}}return false},addSimpleCaptureRule:function(e,t){if(a(m,e)===-1){m.push({urlPattern:e,browserPattern:t||/.*/})}return this},addVirtualForm:function(e,t){if(document.URL.match(t)){b.push({id:e,triggerElements:[],elementSelectors:[],elements:[]})}return this},addTriggerElementToVirtualForm:function(e,t){var n=r(b,"id",t);if(n instanceof Object){n.triggerElements.push(e)}return this},addElementToVirtualForm:function(e,t){var n=r(b,"id",t);if(n instanceof Object){n.elementSelectors.push(e)}return this},getVirtualForms:function(){return b},isSimpleCaptureModeEnabled:function(){for(var e=0;e<m.length;e++){if(document.URL.match(m[e].urlPattern)&&navigator.userAgent.match(m[e].browserPattern)){return true}}return false},getExcludedXhrPostParams:function(){return g.xhr.postParam},getExcludedXhrJsonKeys:function(e){return g.xhr.json[e]},getWhitelistedXhrPostParams:function(){return d.xhr.postParam},getWhitelistedJsonKeys:function(e){return d.xhr.json[e]},useComputedStyleForElement:function(e,t){if(!(t instanceof RegExp)){return this}if(document.URL.match(t)&&E.indexOf(e)===-1){if(Array.isArray(e)){for(var r=e.length-1;r>-1;r--){E.push(e[r])}}else{E.push(e)}}return this},useValuePropertyForElement:function(e,t){if(!(t instanceof RegExp)){return this}if(document.URL.match(t)&&E.indexOf(e)===-1){if(Array.isArray(e)){for(var r=e.length-1;r>-1;r--){C.push(e[r])}}else{C.push(e)}}return this},getComputedStyleSelectors:function(){return E},getValuePropertySelectors:function(){return C},whitelistFieldIds:function(e){if(o(e)){e=[e]}for(var t=0;t<e.length;t++){if(e[t]instanceof RegExp){continue}if(a(d.fieldsSelectors,"#"+e[t])===-1){d.fieldSelectors.push("#"+e[t])}}return this},whitelistFieldNames:function(e){if(o(e)){e=[e]}for(var t=0,r,n=e.length;t<n;t++){if(e[t]instanceof RegExp){continue}r='input[name="'+e[t]+'"],select[name="'+e[t]+'"],textarea[name="'+e[t]+'"]';if(a(d.fieldselectors,r)===-1){d.fieldSelectors.push(r)}}return this},whitelistFieldClasses:function(e){if(o(e)){e=[e]}for(var t=0;t<e.length;t++){if(e[t]instanceof RegExp){continue}if(o(e[t])&&a("."+d.fieldSelectors.class)===-1){d.fieldSelectors.push("."+e[t])}}return this},whitelistXhrPostParams:function(e){if(o(e)){e=[e]}for(var t=0;t<e.length;t++){if(a(d.xhr.postParam,e[t])===-1){d.xhr.postParam.push(e[t])}}return this},whitelistXhrJsonKeys:function(e,t){var r=["requestBody","responseText"];if(o(e)){e=[e]}if(!o(t)||a(r,t)===-1){return this}for(var n=0;n<e.length;n++){if(a(d.xhr.json[t],e[n])===-1){d.xhr.json[t].push(e[n])}}return this}};u=new T;return u}(coreEventtarget,varConstants,utilsExtract,utilsPluck,utilsTrim,utilsIndexof,utilsInarray,utilsIsstring);corePage=function(e,t){var r=window.performance||null;var n=false;var i=null;var a;var s;if(r&&r.timing){s={requestStart:r.timing.requestStart,responseStart:r.timing.responseStart,responseEnd:r.timing.responseEnd}}else{s={requestStart:window.urCapture.timeStarted,responseStart:window.urCapture.timeStarted,responseEnd:(new Date).getTime()}}function o(){var e=document.querySelector(a);if(e){if(i){i.disconnect()}n=true;t.fire("page:ready")}}var u={isReady:function(){return n},initWatcher:function(){a=e.getAutoCaptureNodeSelectors();if(a){if(!o()){i=new MutationObserver(o);i.observe({childNodes:true,subtree:true})}}},resetTimings:function(){var e=(new Date).getTime();u.requestStart=e;u.responseStart=e;u.responseEnd=e}};Object.defineProperties(u,{requestStart:{value:s.requestStart,writable:true},responseStart:{value:s.responseStart,writable:true},responseEnd:{value:s.responseEnd,writable:true},currentUri:{value:document.URL,writable:true},payloadOptions:{value:{captureSource:e.get("captureSource"),captureDimensions:e.get("captureDimensions"),captureReferrer:e.get("captureReferrer"),captureCookies:e.get("captureCookies"),callback:null}}});return u}(coreConfig,coreEventtarget);sessionInstance=function(e,t){var r=i();var n={init:function(){if(this.isTop){this.token=i();this.referrer=document.referrer;this.rtimeBase=t.requestStart;e.fire("readystate:changed",{fpath:this.fpath,referrer:this.referrer,rtimeBase:this.rtimeBase})}}};function i(){var e=(new Date).getTime().toString(16);var t=Math.round(Math.random()*1e6).toString(16);return e+t}Object.defineProperties(n,{rtimeBase:{writable:true},isTop:{value:function(){return window===window.top}()},isChild:{value:function(){return window!==window.top}()},token:{value:r,writable:true},ptoken:{writable:true},fpath:{value:"",writable:true},referrer:{writable:true},url:{value:document.URL},ready:{value:false,writable:true}});e.on("instance:ready",function(){n.ready=true});return n}(coreEventtarget,corePage);varDomain={getTLD:function(e){if(!e){e=document.domain}var t=0;var r=e;var n=r.split(".");var i="_urDomainCheck";while(t<n.length-1){r=n.slice(-1-++t).join(".");document.cookie=i+"="+r+"; path=/; domain="+r+"; max-age=3";if(document.cookie.indexOf(i)!==-1){return r}}return r}};coreCookie=function(e,t,r,n,i){var a=null,s=null,o={name:function(e){if(arguments.length===1){a=e;return this}return a},set:function(){a=a||t.get("cookieName");s=u(a);if(!s){return}e.fire("readystate:changed",{cookie:true});return this},save:function(t){s=t;if(!t){}document.cookie=a+"="+s+"; path=/; domain="+i.getTLD();e.fire("readystate:changed",{cookie:true});return this}};function u(e){var t,r=document.cookie.split(";");if(r.length===0){return false}for(var i=0;i<r.length;i++){t=r[i].split("=");if(n(t[0])===e&&typeof t[1]!=="undefined"){return n(t[1])}}return false}Object.defineProperty(o,"cookie",{get:function(){return s}});return o}(coreEventtarget,coreConfig,sessionInstance,utilsTrim,varDomain);utilsExtend=function(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}function n(){this.constructor=e}if(typeof e==="function"){n.prototype=t.prototype;e.prototype=new n}};utilsObj2query=function(){var e=[];function t(r){for(var n in r){if(r.hasOwnProperty(n)){if(typeof r[n]==="object"){t(r[n])}else{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r[n]))}}}}return function(r){e=[];t(r);return e.join("&")}}();varDocument=window.document;coreErrorhandler=function(e,t,r,n,i,a,s){var o=[],u=new Image,c="error.gif",d="beacon.gif";function l(r,i){var o=e.get("server")+"/"+r+"?",c={cookie:t.value,url:s.URL,version:e.get("version"),id:e.get("id")};if(e.get("captureReferrer")){c.referrer=s.referrer}if(i){n(c,i)}o+=a(c);u.src=o}return{raiseErr:function(t,r){var n=t.number||""+r;var a=c;var s=t.stack?t.stack.toString():r;var u={errMsg:t.message,errCode:t.number&65535,errName:t.name,errLocation:s.replace(/(?:\r\n|\r|\n)/g," ")};if(i(o,n)===-1){if(!e.get("errorReporting")){}else{l.call(this,a,u)}o.push(n)}l.call(this,a,u)},fireBeacon:function(){var e=d;l.call(this,e)}}}(coreConfig,coreCookie,corePage,utilsExtend,utilsIndexof,utilsObj2query,varDocument);coreMessaging=function(e,t,r){var n=function(){this.registeredFunctions={};window.addEventListener("message",this.receive.bind(this),false)};n.prototype.send=function(e,t){if(!e||!JSON.parse(t)){return}e.postMessage(t,"*")};n.prototype.receive=function(t){var n=t.origin||t.originalEvent.origin,i=[].concat(e.get("allowedOrigins"),e.get("storageDomain")),a;if(r(i,n)===-1){return}try{a=JSON.parse(t.data);if(a.fn){if(this.registeredFunctions[a.fn]){this.registeredFunctions[a.fn].apply(this,a.args)}}}catch(e){}};n.prototype.registerFunction=function(e,t){if(!this.registeredFunctions[e]){this.registeredFunctions[e]=t}};return new n}(coreConfig,coreEventtarget,utilsIndexof);utilsPrototype=function(e){return{getConstructorName:function(t){if(this.get(t).constructor.name==="undefined"){var r=/function\s(\w+)/;var n=r.exec(this.get(t).constructor.toString());return n&&n.length>1?e(n[1]):""}return this.get(t).constructor.name},get:function(e){try{if(typeof Object.getPrototypeOf!=="function"){if(typeof e.__proto__==="object"){return e.__proto__}return e.constructor.prototype}return Object.getPrototypeOf(e)}catch(e){return null}}}}(utilsTrim);utilsUseragent=function(e){var t=window.navigator.userAgent;var r=window.navigator.appName;return{isIE:function(){return r==="Netscape"&&t.match(/Trident\/7/)},isEdge:function(){return t.match(/Edge\/\d+\.\d+/)},isFirefox:function(){return t.match(/Firefox/)},isSupported:function(){try{return typeof MutationObserver!=="undefined"&&e.get(window)!==null}catch(e){return false}}}}(utilsPrototype);varXhr=function(e,t){function r(t){if(!t||typeof t!=="object"){return false}if(e.getConstructorName(t)==="undefined"&&(e.getConstructorName(t).match(/XMLHttpRequest\(\)/)||e.getConstructorName(t).match(/XMLHttpRequestConstructor/))){return true}return e.getConstructorName(t)==="XMLHttpRequest"}function n(n){var i;if(!n||typeof n!=="object"){return false}for(var a in n){if(n.hasOwnProperty(a)||t.isIE()){if(r(n[a])){i=e.get(n[a]).constructor;return i}}}return n.constructor}return function(){var e=new XMLHttpRequest;return n(e)}()}(utilsPrototype,utilsUseragent);utilsWwwformurlencode=function(e){var t="";for(var r in e){if(e.hasOwnProperty(r)){if(typeof e[r]==="undefined"||e[r]===null){t+=r+"=&"}else{t+=r+"="+encodeURIComponent(e[r].toString())+"&"}}}return t.replace(/&$/,"")};(function(e,t){if(typeof exports==="object"){module.exports=exports=t()}else if(true){cryptoJsCore=function(){return typeof t==="function"?t():t}()}else{e.CryptoJS=t()}})(this,function(){var e=e||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;e.prototype=t;r=new e;e.prototype=null;return r}}();var n={};var i=n.lib={};var a=i.Base=function(){return{extend:function(e){var t=r(this);if(e){t.mixIn(e)}if(!t.hasOwnProperty("init")||this.init===t.init){t.init=function(){t.$super.init.apply(this,arguments)}}t.init.prototype=t;t.$super=this;return t},create:function(){var e=this.extend();e.init.apply(e,arguments);return e},init:function(){},mixIn:function(e){for(var t in e){if(e.hasOwnProperty(t)){this[t]=e[t]}}if(e.hasOwnProperty("toString")){this.toString=e.toString}},clone:function(){return this.init.prototype.extend(this)}}}();var s=i.WordArray=a.extend({init:function(e,r){e=this.words=e||[];if(r!=t){this.sigBytes=r}else{this.sigBytes=e.length*4}},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words;var r=e.words;var n=this.sigBytes;var i=e.sigBytes;this.clamp();if(n%4){for(var a=0;a<i;a++){var s=r[a>>>2]>>>24-a%4*8&255;t[n+a>>>2]|=s<<24-(n+a)%4*8}}else{for(var a=0;a<i;a+=4){t[n+a>>>2]=r[a>>>2]}}this.sigBytes+=i;return this},clamp:function(){var t=this.words;var r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8;t.length=e.ceil(r/4)},clone:function(){var e=a.clone.call(this);e.words=this.words.slice(0);return e},random:function(t){var r=[];var n=function(t){var t=t;var r=987654321;var n=4294967295;return function(){r=36969*(r&65535)+(r>>16)&n;t=18e3*(t&65535)+(t>>16)&n;var i=(r<<16)+t&n;i/=4294967296;i+=.5;return i*(e.random()>.5?1:-1)}};for(var i=0,a;i<t;i+=4){var o=n((a||e.random())*4294967296);a=o()*987654071;r.push(o()*4294967296|0)}return new s.init(r,t)}});var o=n.enc={};var u=o.Hex={stringify:function(e){var t=e.words;var r=e.sigBytes;var n=[];for(var i=0;i<r;i++){var a=t[i>>>2]>>>24-i%4*8&255;n.push((a>>>4).toString(16));n.push((a&15).toString(16))}return n.join("")},parse:function(e){var t=e.length;var r=[];for(var n=0;n<t;n+=2){r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4}return new s.init(r,t/2)}};var c=o.Latin1={stringify:function(e){var t=e.words;var r=e.sigBytes;var n=[];for(var i=0;i<r;i++){var a=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){var t=e.length;var r=[];for(var n=0;n<t;n++){r[n>>>2]|=(e.charCodeAt(n)&255)<<24-n%4*8}return new s.init(r,t)}};var d=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}};var l=i.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new s.init;this._nDataBytes=0},_append:function(e){if(typeof e=="string"){e=d.parse(e)}this._data.concat(e);this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data;var n=r.words;var i=r.sigBytes;var a=this.blockSize;var o=a*4;var u=i/o;if(t){u=e.ceil(u)}else{u=e.max((u|0)-this._minBufferSize,0)}var c=u*a;var d=e.min(c*4,i);if(c){for(var l=0;l<c;l+=a){this._doProcessBlock(n,l)}var f=n.splice(0,c);r.sigBytes-=d}return new s.init(f,d)},clone:function(){var e=a.clone.call(this);e._data=this._data.clone();return e},_minBufferSize:0});var f=i.Hasher=l.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e);this.reset()},reset:function(){l.reset.call(this);this._doReset()},update:function(e){this._append(e);this._process();return this},finalize:function(e){if(e){this._append(e)}var t=this._doFinalize();return t},blockSize:512/32,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new h.HMAC.init(e,r).finalize(t)}}});var h=n.algo={};return n}(Math);return e});(function(e,t){if(typeof exports==="object"){module.exports=exports=t(core)}else if(true){cryptoJsSha256=function(e){return typeof t==="function"?t(e):t}(cryptoJsCore)}else{t(e.CryptoJS)}})(this,function(e){(function(t){var r=e;var n=r.lib;var i=n.WordArray;var a=n.Hasher;var s=r.algo;var o=[];var u=[];(function(){function e(e){var r=t.sqrt(e);for(var n=2;n<=r;n++){if(!(e%n)){return false}}return true}function r(e){return(e-(e|0))*4294967296|0}var n=2;var i=0;while(i<64){if(e(n)){if(i<8){o[i]=r(t.pow(n,1/2))}u[i]=r(t.pow(n,1/3));i++}n++}})();var c=[];var d=s.SHA256=a.extend({_doReset:function(){this._hash=new i.init(o.slice(0))},_doProcessBlock:function(e,t){var r=this._hash.words;var n=r[0];var i=r[1];var a=r[2];var s=r[3];var o=r[4];var d=r[5];var l=r[6];var f=r[7];for(var h=0;h<64;h++){if(h<16){c[h]=e[t+h]|0}else{var p=c[h-15];var g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3;var v=c[h-2];var m=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;c[h]=g+c[h-7]+m+c[h-16]}var y=o&d^~o&l;var b=n&i^n&a^i&a;var w=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22);var E=(o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25);var C=f+E+y+u[h]+c[h];var S=w+b;f=l;l=d;d=o;o=s+C|0;s=a;a=i;i=n;n=C+S|0}r[0]=r[0]+n|0;r[1]=r[1]+i|0;r[2]=r[2]+a|0;r[3]=r[3]+s|0;r[4]=r[4]+o|0;r[5]=r[5]+d|0;r[6]=r[6]+l|0;r[7]=r[7]+f|0},_doFinalize:function(){var e=this._data;var r=e.words;var n=this._nDataBytes*8;var i=e.sigBytes*8;r[i>>>5]|=128<<24-i%32;r[(i+64>>>9<<4)+14]=t.floor(n/4294967296);r[(i+64>>>9<<4)+15]=n;e.sigBytes=r.length*4;this._process();return this._hash},clone:function(){var e=a.clone.call(this);e._hash=this._hash.clone();return e}});r.SHA256=a._createHelper(d);r.HmacSHA256=a._createHmacHelper(d)})(Math);return e.SHA256});coreHashmanager=function(e,t){var r=[];return{isEmpty:function(){return r.length===0},getLatestHashes:function(){var e;if(r.length>0){e=r.join(",")}return e},clear:function(){r=[];return this},addString:function(n){if(typeof n!=="undefined"&&r.indexOf(n)===-1){r.push(t(String(n).toLowerCase()+e.s))}return this}}}(coreConfig,cryptoJsSha256);coreTransport=function(e,t,r,n,i,a,s,o,u,c,d,l){var f="POST";var h=false;var p=3e4;var g=1;var v=false;var m={};function y(e,t){this.disabled=h;this.xhr=new s;this.xhr.urTransport=true;this.xhr.urStorageId=null;if(e&&typeof e==="function"){this.xhr.urCallback=e}this.xhr.urFlags=t||{}}function b(e){this.data=e;if(t.get("passiveCapture")){if(this.data.action!=="fORMMETA2"){this.data.action=this.data.action.toLowerCase()}}if(this.data.action!==a.ACTION_PAGE_PRECURSOR&&this.data.action!==a.ACTION_PAGE_UNLOAD&&!l.isEmpty()){this.data.hashedContent=l.getLatestHashes();l.clear()}}b.prototype.format=function(e){if(t.get("passiveCapture")&&this.data.action!=="page"&&this.data.action!=="dom"){e.setRequestHeader("Content-Type","application/urdata");e.setRequestHeader("X-UR-Capture-Type",this.data.action);e.setRequestHeader("X-UR-version",t.get("version"));return this.data.source}e.setRequestHeader("Content-type","application/x-www-form-urlencoded");if(!e.urRetry){u(this.data,{id:t.get("id"),version:t.get("version"),cookie:r.cookie,sequenceId:g++});if(t.get("captureCookies")&&this.data.action!==a.ACTION_PAGE_PRECURSOR&&this.data.action!==a.ACTION_PAGE_UNLOAD){u(this.data,{cookies:document.cookie})}if(this.data.action===a.ACTION_PAGE||this.data.action===a.ACTION_PAGE_IFRAME||this.data.action===a.ACTION_PAGE_PRECURSOR||this.data.action===a.ACTION_PAGE_UNLOAD){u(this.data,{token:i.token})}if(this.data.action!==a.ACTION_PAGE&&this.data.action!==a.ACTION_PAGE_PRECURSOR&&this.data.action!==a.ACTION_PAGE_UNLOAD){u(this.data,{ptoken:i.ptoken||i.token})}if(this.data.action===a.ACTION_PAGE_IFRAME||this.data.action===a.ACTION_PAGE_PRECURSOR&&i.fpath!==""){u(this.data,{fpath:i.fpath})}if(!this.data.url){if(i.isChild&&this.data.action===a.ACTION_EVENT&&t.get("iframes")){this.data.url=i.referrer}else{this.data.url=document.URL}}if(typeof this.data.requestStart==="undefined"&&this.data.action!==a.ACTION_PAGE_UNLOAD){this.data.requestStart=n.requestStart}}this.data.currentTime=(new Date).getTime();return d(this.data)};y.prototype={constructor:y,sendData:function(r,n){if(!r){return}var a=new b(r);var s=t.get("server");var o;s+=t.get("passiveCapture")?"?"+(new Date).getTime():"";if(this.disabled){return false}try{if(!this.xhr.urStorageId){this.xhr.urStorageId=(new Date).getTime().toString()+Math.round(Math.random()*100)}this.xhr.urRetry=n||false;this.xhr.urAction=a.data.action;if(this.xhr.nativeOpen){this.xhr.nativeOpen(f,s,true)}else{this.xhr.open(f,s,true)}this.xhr.timeout=p;this.xhr.addEventListener("readystatechange",this.readystatechange,false);this.xhr.addEventListener("timeout",this.timeout.bind(this),false);o=a.format(this.xhr);if(!i.ready){if(!v){m[this.xhr.urStorageId]={transport:this,data:a.data};return}e.fire("transport:cache",this.xhr,a.data);return}if(!this.xhr.urRetry&&a.data.action!=="KEEP-ALIVE"&&typeof a.data.deferred==="undefined"){if(v){e.fire("transport:cache",this.xhr,a.data)}}if(this.xhr.nativeSend){this.xhr.nativeSend(o)}else{this.xhr.send(o)}}catch(t){e.fire("error:raise",t,"core/transport::sendData")}},readystatechange:function(t){if(this.readyState===3){e.fire("transport:complete",this);if(this.urCallback){this.urCallback.apply(this,t)}}},timeout:function(e){e.currentTarget.timedOut=true}};function w(){for(var e in m){m[e].data.currentTime=(new Date).getTime();m[e].data.deferred=true;m[e].transport.sendData(m[e].data);delete m[e]}}e.on("session:expired",function(){h=true});e.on("storage:ready",function(){v=true;if(i.ready){w()}});e.on("instance:ready",function(){w()});e.on("transport:sequence:reset",function(){g=1});return y}(coreEventtarget,coreConfig,coreCookie,corePage,sessionInstance,varConstants,varXhr,utilsPrototype,utilsExtend,utilsIndexof,utilsWwwformurlencode,coreHashmanager);coreStorage=function(e,t,r,n,i,a,s){var o="__ur__";var u;var c;var d;var l;var f;function h(e){var t={cookie:i.cookie,cached:true};if(e.cookies){e.cookies=document.cookie}s(e,t)}function p(){return l||function(){var e=document.querySelector("iframe[data-ur-storage]");if(e){return e.contentWindow}return false}()}f={init:function(){var t;if(document.readyState==="loading"){document.addEventListener("readystatechange",this.init,false);return}u=n.get("storageDomain");c=n.get("storageTarget");if(!f.isAvailable("sessionStorage")||!c){e.fire("storage:error");return false}body=document.body;t=document.createElement("urscrub");d=document.createElement("iframe");d.setAttribute("src",u+c);d.setAttribute("data-ur-storage",true);d.setAttribute("name","URStorage");d.setAttribute("title","Capture Storage Endpoint");d.setAttribute("aria-hidden","true");d.style.display="none";d.style.width="1px";d.style.height="1px";d.style.border="none";d.style.visibility="hidden";t.appendChild(d);document.body.appendChild(t)},load:function(){l=p();f.ready=true;e.fire("storage:ready",l);if(!i.cookie){f.setCookie()}},isAvailable:function(e){var t=window[e],r="__ur__test";try{t.setItem(r,"true");t.removeItem(r);return true}catch(e){return false}},deleteTransportFromCache:function(e){var r=p();if(!r){return}var n={action:"deleteTransport",key:e};t.send(r,JSON.stringify(n));return this},readTransportCache:function(){var e=p();if(!e){return}var r={action:"readTransportCache"};t.send(e,JSON.stringify(r));return this},flushTransportCache:function(e){if(!e||Object.keys(e).length===0){return}for(var t in e){var n=JSON.parse(e[t]);var i=new r;i.xhr.urStorageId=t;h(n);i.sendData(n,true)}},writeTransportToCache:function(e,r){var n=p();if(!n){return}var i={action:"writeTransport",key:e,data:r};t.send(n,JSON.stringify(i));return this},setCookie:function(){var e={action:"setCookie"};t.send(l,JSON.stringify(e))}};Object.defineProperties(f,{window:{value:l},ready:{value:false,writable:true}});e.on("transport:cache",function(e,t){f.writeTransportToCache(e.urStorageId,t)});e.on("transport:complete",function(e){f.deleteTransportFromCache(e.urStorageId)});return f}(coreEventtarget,coreMessaging,coreTransport,coreConfig,coreCookie,sessionInstance,utilsExtend);utilsRepeat=function(e,t){var r=[];for(var n=0;n<t;n++){r.push(e)}return r.join("")};utilsStrpad=function(e){var t=-1;return function(r,n,i,a){var s=e(n,i-r.length);a=a||t;return a===-1?s+r:r+s}}(utilsRepeat);utilsBase={dec2hex:function(e){return parseInt(e,10).toString(16)}};utilsRtime=function(e,t,r,n){var i=8;return{offset:function(r){var n=r||(new Date).getTime();return e.rtimeBase?n-e.rtimeBase:n-t.requestStart},
output:function(e){var t;if(!e){e=false}t=n.dec2hex(this.offset(e));return r(t,"0",i)},format:function(e){e=n.dec2hex(e);return r(e,"0",i)}}}(sessionInstance,corePage,utilsStrpad,utilsBase);utilsNumberformat=function(e,t,r){var n="0";function i(e){return function(t){return s(t,e)}}function a(e){if(typeof Math.log2==="function"){return Math.log2(e)}return Math.log(e)/Math.LN2}function s(e,i){var s=Math.floor(0xffffffffffff/Math.pow(256,6-i));var o;var u="var/numberformat";try{e=parseInt(e,10);if(isNaN(e)){e=0}if(typeof e!=="number"||isNaN(e)){o="Could not cast number ("+e+") to int";throw new ReferenceError(o)}if(e<0){if(i<1){o="Unable to convert to anything less than a single byte.";throw new RangeError(o)}else if(i>6){o="6 bytes is the max size supported.";throw new RangeError(o)}if(a(-e)>8*i-1){o="Cannot convert number ("+e+") in "+i+" bytes.";throw new RangeError(o)}e=s+e+1}else if(a(e)>=8*i-1){o="Cannot convert number ("+e+") in "+i+" bytes.";throw new RangeError(o)}}catch(e){if(window.urCapture.isDebug()){t.fire("error:raise",e,u+":format");throw e}}return r(e.toString(16),n,i*2)}return{strLen:i(4),id:i(1),xy:i(4),keycode:i(2),tabIndex:i(2),sequenceId:i(4),pageType:i(1),flagId:i(4)}}(coreConfig,coreEventtarget,utilsStrpad);utilsUtf16={getUtf8Bytes:function(e){var t;var r=0;if(typeof e==="undefined"){return 0}for(var n=0;n<e.length;++n){t=e.charCodeAt(n);if((t&65408)===0){r+=1}else if((t&63488)===0){r+=2}else if((t&63488)===55296){r+=4;++n}else{r+=3}}return r}};eventTypes={MOUSEMOVE:1,MOUSECLICK:4,WINDOWSCROLL:10,WINDOWRESIZE:11,FIELDFOCUS:12,FIELDBLUR:13,FIELDCHANGE:14,FIELDKEYPRESS:15,FORMSUBMIT:16,NODEADDED:17,NODEREMOVED:18,NODECHANGED:19,FORMVALIDATION:20,SETFPATH:21,WINDOWLOAD:22,MANUALFLAG:23};eventFpath=function(e,t,r,n,i){var a=function(){function a(){this.rto=t.output();this.eventType=r.id(i.SETFPATH);this.generatePayload();this.sequenceId="00000000";this.payloadLen=r.strLen(n.getUtf8Bytes(this.eventType+this.sequenceId+this.payload.join("")));this.data=[this.rto,this.payloadLen,this.eventType,this.sequenceId].concat(this.payload).join("")}a.prototype.generatePayload=function(){var t=e.fpath,n=r.strLen(t.length);this.payload=[n,t]};return a}();return a}(sessionInstance,utilsRtime,utilsNumberformat,utilsUtf16,eventTypes);eventCache=function(e,t,r,n,i,a,s,o){var u,c=[],d=false,l=[],f={IDLE:0,WRITING:1,FLUSHING:2},h=f.IDLE,p=function(){return e.get("eventCacheFlushLimit")};function g(){var e=i.requestStart-a.rtimeBase;var t=l.map(function(t){var r=parseInt(t.substr(0,8),16);if(r<=e){return o.format(r+e)+t.substr(8)}return t});c=c.concat(t);l=[]}u={setFPath:function(){var e=new s;var t=e.data;c.unshift(t);return this},write:function(e,t){var r=d?c:l;r.push(e);if(d&&r.join("").length>=p()||t){this.flush()}return this},flush:function(){var e=new n;var t={action:"EVENT2",source:c.join("")};if(c.length<2){return this}c=[];this.setFPath();h=f.FLUSHING;e.sendData(t);return this},setFlushLimit:function(t){e.set("eventCacheFlushLimit",t);return this},cacheSize:function(){return c.length},isFlushing:function(){return h===f.FLUSHING},reset:function(){c=[];d=false;return this}};if(d){u.setFPath()}r.on("instance:ready",function(){if(!d){u.setFPath();d=true;g()}});return u}(coreConfig,coreCookie,coreEventtarget,coreTransport,corePage,sessionInstance,eventFpath,utilsRtime);scrubbingScrubutils=function(e,t){return{isCardNumber:function(e){return function(t){var r=t.replace(/(\s|-|\.){1}/g,"");var n=/^(?:[1-9]\d{11,19})$/g;var i=r.length;var a=1;var s=0;if(!r.match(n)){return false}while(i--){s+=!(a^=1)?parseInt(r[i],10):e[r[i]]}return s%10===0&&s>0}}([0,2,4,6,8,1,3,5,7,9]),maskString:function(r){var n=r,i="",a=e.get("scrubMask"),s=this.isCardNumber(r)&&e.get("scrubCardsPartial"),o,u;if(typeof r==="undefined"||r===null){return r}r=String(r);o=r.length;if(e.get("hashContent")===true){t.addString(r)}if(s){n=r.substr(0,o-4);i=r.substr(o-4,o)}u=a.split("");n=n.replace(/[a-z]/g,u[0]);n=n.replace(/[A-Z]/g,u[1]);n=n.replace(/[^\da-zA-Z]/g,u[3]);n=n.replace(/\d/g,u[2]);return n+i}}}(coreConfig,coreHashmanager);domNode=function(e,t,r,n,i,a,s,o){function u(e){this.uuid=e.uuid||null;this.id=e.id;this.name=e.name;this.type=e.type;this.domNode=e.domNode;this.parent=e.parent;this.excluded=e.excluded||false;this.nextSibling=null;if(r.get("ignoreWhitespaceTextNodes")===true){if(e.type===3&&s(e.value)===""){this.whitespace=true}}this.scrubTargets={attr:[],self:false};this.dirty=false;this.scrubbed={attr:{},value:null};this.stateChanges={excluded:false,lastKnownStyle:null};this.style={};this.captureTriggers={click:[],mouseover:[],mouseout:[],focus:[],blur:[],change:[],keypress:[],attrchange:[]};this.formField=e.formField;if(this.formField&&r.get("captureStateChanges")&&r.get("detectPropChanges")){this.applyPropChangeObserver()}this.added=e.added||false;this.scanId=e.scanId||1;r.getNodeEventTriggers(this);if(this.type===1){var t=window.getComputedStyle(this.domNode);if(t&&t.getPropertyValue("overflow")!=="visible"){this.domNode.addEventListener("scroll",this.scrollEvent.bind(this),true)}}if(e.name==="input"&&e.hasOwnProperty("lastKnownValue")){this.lastKnownValue=e.lastKnownValue}}u.prototype.scrollEvent=function(t){if(typeof this.style.scrollTop==="undefined"&&t.target.scrollTop||this.style.scrollTop!==t.target.scrollTop){e.fire("state:change:trigger",{node:this.domNode,attributeName:"scrollTop",value:t.target.scrollTop})}if(typeof this.style.scrollLeft==="undefined"&&t.target.scrollLeft||this.style.scrollLeft!==t.target.scrollLeft){e.fire("state:change:trigger",{node:this.domNode,attributeName:"scrollLeft",value:t.target.scrollLeft})}this.style.scrollTop=t.target.scrollTop;this.style.scrollLeft=t.target.scrollLeft};u.prototype.applyPropChangeObserver=function(){Object.defineProperty(this,"observePropChanges",{enumerable:false,configurable:true,writable:false,value:function(t){var r=o.get(this);var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(this,t,{enumerable:true,configurable:false,get:function(){return n.get.call(this)},set:function(r){n.set.call(this,r);if(n.get.call(this)!==r){this.urNode.onchange();e.fire("state:change:trigger",{node:this,attributeName:t,value:this.getAttribute(t)})}return r}})}})};u.prototype.onchange=function(){if(this.name==="select"){u.prototype.selectElementChanged.apply(this)}else{this.dirty=true}};u.prototype.selectElementChanged=function(){var e=this.domNode.options;for(var t=0;t<e.length;t++){if(e[t].__ur_uuid__){e[t].urNode.dirty=true}}};u.prototype.getAttributeValueByKey=function(t){var r=t.toLowerCase();try{if(this.attributes){return this.attributes[r]}}catch(t){e.fire("error:raise",t,"dom/dataprop::getAttributeValueByKey")}return null};return u}(coreEventtarget,scrubbingScrubutils,coreConfig,utilsIndexof,utilsPluck,utilsExtend,utilsTrim,utilsPrototype);eventEvent=function(e,t,r,n,i,a){var s=0;function o(){if(this.payload){this.cache=e;this.sequenceId=this.getSequenceId();this.payloadLen=i.strLen(a.getUtf8Bytes(this.eventType+this.sequenceId+this.payload.join("")));this.writeToCache()}}o.prototype.writeToCache=function(){var e=[this.rto,this.payloadLen,this.eventType,this.sequenceId].concat(this.payload).join("");this.cache.write(e);return this};o.prototype.applyNodeCaptureTriggers=function(e){var t;if(!this.webEvent||!this.webEvent.target||!this.webEvent.target.urNode||!this.webEvent.target.urNode.captureTriggers){return this}t=this.webEvent.target.urNode.captureTriggers[e];for(var r=0;r<t.length;r++){t[r].fire()}return this};o.prototype.getSequenceId=function(){return i.sequenceId(++s)};return o}(eventCache,coreEventtarget,coreStorage,sessionInstance,utilsNumberformat,utilsUtf16);eventUserevent=function(e,t,r){var n=function(n){r(i,n);function i(){n.call(this)}i.prototype.writeToCache=function(){e.prototype.writeToCache.call(this);t.fire("session:activity",{timestamp:(new Date).getTime()});return this};return i}(e);return n}(eventEvent,coreEventtarget,utilsExtend);eventMouse=function(e,t,r,n,i,a,s,o,u,c){var d="event/mouse";var l=function(e){a(t,e);function t(t){this.eventType=i.id(c.MOUSEMOVE);this.webEvent=t;this.rto=r.output();this.generatePayload();e.call(this)}t.prototype.generatePayload=function(){try{var e=i.xy(this.webEvent.pageX);var t=i.xy(this.webEvent.pageY);this.payload=[e,t]}catch(e){o.fire("error:raise",e,d+"::MouseMoveEvent")}};return t}(u);var f=function(n){a(s,n);function s(a){if(a.pageX<=0||a.pageY<=0){return}this.eventType=i.id(c.MOUSECLICK);this.webEvent=a;this.applyNodeCaptureTriggers("click");if(t.get("captureMode")!==e.captureMode.SIMPLE){this.rto=r.output();this.generatePayload();n.call(this);this.cache.flush()}}s.prototype.generatePayload=function(){try{var e=i.xy(this.webEvent.pageX);var t=i.xy(this.webEvent.pageY);var r=i.id(1);var n=this.webEvent.target.__ur_uuid__||"";var a=i.strLen(n.toString().length);var s=this.webEvent.target.id||"";var u=i.strLen(s.length);this.payload=[r,e,t,a,n,u,s]}catch(e){o.fire("error:raise",e,d+"::MouseClickEvent")}};return s}(u);var h=function(e){a(t,e);function t(e){this.webEvent=e;this.applyNodeCaptureTriggers("mouseover")}return t}(u);var p=function(e){a(t,e);function t(e){this.webEvent=e;this.applyNodeCaptureTriggers("mouseout")}return t}(u);return{bindings:{move:function(e){new l(e)},click:function(e){window.setTimeout(function(){new f(e)},0)},mouseover:function(e){window.setTimeout(function(){new h(e)},0)},mouseout:function(e){window.setTimeout(function(){new p(e)},0)}}}}(varConstants,coreConfig,utilsRtime,utilsTrim,utilsNumberformat,utilsExtend,domDomutils,coreEventtarget,eventUserevent,eventTypes);utilsSelectnodes=function(e,t){var r=t||document;var n=typeof r.querySelectorAll==="function"?r.querySelectorAll(e):[];return n};domTriggermanager=function(e,t,r,n,i){var a=["mouseover","mouseout"];function s(){this.rules=e.getNodeEventTriggers();this.terminated=[]}s.prototype.fireTrigger=function e(t,r){t.fire();if(t.runOnce){this.clearTrigger(t,r)}};s.prototype.clearTrigger=function e(t,r){var n=r.urNode.captureTriggers[t.type].indexOf(t);if(n!==-1){Array.prototype.splice.call(r.urNode.captureTriggers[t.type],n,1);this.terminated.push(t)}};s.prototype.assign=function(e){var t;var s=Object.keys(this.rules);for(var o=s.length-1;o>=0;o--){if(this.rules[s[o]].length>0){for(var u=this.rules[s[o]].length-1;u>=0;u--){t=i(this.rules[s[o]][u].selectors,e);for(var c=Object.keys(t).length-1;c>=0;c--){if(n(t[c].urNode.captureTriggers[s[o]],this.rules[s[o]][u].trigger)===-1&&n(this.terminated,this.rules[s[o]][u].trigger)===-1){t[c].urNode.captureTriggers[s[o]].push(this.rules[s[o]][u].trigger);if(n(a,s[o])!==-1){t[c].addEventListener(s,r.bindings[s[o]],false)}}}t=null}}}};return new s}(coreConfig,coreEventtarget,eventMouse,utilsIndexof,utilsSelectnodes);scrubbingSelectorsDefaults=function(){function e(){this.fieldSelectors=['input[type="password"]'];this.xhrPostParams=["password"];this.xhrJsonKeys={requestBody:["password"],responseText:["password"]}}return new e}();scrubbingSelectorsSelector=function(e,t){function r(){this.scrubbingDefaults=e;this.nodeSelectors=t.getNodeScrubbingRules()}r.prototype.selectXhrPostParams=function(){return this.xhrPostParams};r.prototype.selectXhrJsonKeys=function(e){return this.xhrJsonKeys[e]};return r}(scrubbingSelectorsDefaults,coreConfig);scrubbingSelectorsBlacklisted=function(e,t){function r(){this.fieldSelectors=t.getBlacklistedFieldSelectors().concat(this.scrubbingDefaults.fieldSelectors);this.xhrPostParams=t.getBlacklistedXhrPostParams().concat(this.scrubbingDefaults.xhrPostParams);this.xhrJsonKeys={requestBody:t.getBlacklistedXhrJsonKeys("requestBody").concat(this.scrubbingDefaults.xhrJsonKeys.requestBody),responseText:t.getBlacklistedXhrJsonKeys("responseText").concat(this.scrubbingDefaults.xhrJsonKeys.responseText)}}r.prototype=new e;r.prototype.selectFields=function(e){var t=[];if(this.fieldSelectors.length>0){t=e.querySelectorAll(this.fieldSelectors.join(","))}return t};return r}(scrubbingSelectorsSelector,coreConfig);scrubbingSelectorsWhitelisted=function(e,t,r){function n(){this.fieldSelectors=t.getWhitelistedFieldSelectors();this.xhrPostParams=t.getWhitelistedXhrPostParams();this.xhrJsonKeys={requestBody:t.getWhitelistedJsonKeys("requestBody"),responseText:t.getWhitelistedJsonKeys("responseText")};this.xhrPostParams=this.xhrPostParams.filter(function(e){return r(this.scrubbingDefaults.xhrPostParams,e)===-1}.bind(this));this.xhrJsonKeys.requestBody=this.xhrJsonKeys.requestBody.filter(function(e){return r(this.scrubbingDefaults.xhrJsonKeys.requestBody,e)===-1}.bind(this));this.xhrJsonKeys.responseText=this.xhrJsonKeys.responseText.filter(function(e){return r(this.scrubbingDefaults.xhrJsonKeys.responseText,e)===-1}.bind(this))}n.prototype=new e;n.prototype.selectFields=function(e){var t=['input:not([type="button"]):not([type="submit"]):not([type="image"])',"select","textarea"];var n=Array.prototype.slice.call(e.querySelectorAll(t.join(",")));var i=e.querySelectorAll(this.scrubbingDefaults.fieldSelectors);var a=this.fieldSelectors.length>0?Array.prototype.slice.call(e.querySelectorAll(this.fieldSelectors.join(","))):[];if(a.length>0){for(var s=0,o=a.length,u;s<o;s++){if(r(i,a[s])===-1&&(u=r(n,a[s]))!==-1){n.splice(u,1)}}}return n};return n}(scrubbingSelectorsSelector,coreConfig,utilsIndexof);scrubbingManager=function(e,t,r,n,i,a,s,o){function u(e){this.scrubUtils=e}u.prototype.init=function(){this.scrubMode=i.get("scrubMode");this.selector=this.scrubMode==="whitelist"?new t:new e};u.prototype.assignScrubTargets=function(e){c.call(this,e);l.call(this,e)};u.prototype.scrubPostParams=function(e,t){var r=e.split("&");var n=[];var a=[];var o=i.getExcludedXhrPostParams();for(var u=0,c;u<r.length;u++){n=r[u].split("=");if(s(o,n[0])===-1){c=t?decodeURIComponent(n[0]):n[0];if(this.scrubMode==="whitelist"&&s(this.selector.xhrPostParams,n[0])!==-1||this.scrubMode==="blacklist"&&s(this.selector.xhrPostParams,n[0])===-1){a.push(c+"="+n[1])}else{try{n[1]=JSON.parse(n[1]);if(!(n[1]instanceof Object)){throw new Error}n[1]=this.scrubObject(n[1]);a.push(c+"="+JSON.stringify(n[1]))}catch(e){a.push(c+"="+this.scrubUtils.maskString(String(n[1])))}}}}return a.join("&")};u.prototype.scrubObject=function(e,t){for(var r in e){if(e.hasOwnProperty(r)){if(!t||s(i.getExcludedXhrJsonKeys(t),r)===-1){if(typeof e[r]==="number"){try{e[r]=e[r].toString()}catch(e){continue}}if(o(e[r])){if(this.scrubMode==="whitelist"&&s(this.selector.xhrJsonKeys[t],r)===-1||this.scrubMode==="blacklist"&&s(this.selector.xhrJsonKeys[t],r)!==-1){e[r]=this.scrubUtils.maskString(e[r])}}else{e[r]=this.scrubObject(e[r],t)}}}}return e};u.prototype.scrubString=function(e){return this.scrubUtils.maskString(a(e))};function c(e){var t=this.selector.selectFields(e);for(var r=0,i=t.length;r<i;r++){if(!t[r].urNode){n.fire("dom:processnode",t[r])}switch(t[r].nodeName.toLowerCase()){case"input":t[r].urNode.scrubTargets.attr.push("value");break;case"textarea":t[r].urNode.scrubTargets.attr.push("value");if(t[r].childNodes.length>0){t[r].childNodes[0].urNode.scrubTargets.self=true}break;case"select":t[r].urNode.scrubTargets.attr.push("value");d(t[r]);break}}}function d(e){var t=document.createTreeWalker(e,5,null,false);while(t.nextNode()){if(!t.currentNode.urNode){n.fire("dom:processnode",t.currentNode)}if(t.currentNode.nodeType===3){if(a(t.currentNode.data)!==""){t.currentNode.urNode.scrubTargets.self=true}}else if(t.currentNode.nodeName.toLowerCase().match(/opt(ion|group)/)){t.currentNode.urNode.scrubTargets.attr.push("value");t.currentNode.urNode.scrubTargets.attr.push("label")}}}function l(e){var t;var r=i.getNodeScrubbingRules();if(r.length===0){return}t=document.querySelectorAll(r);if(!t){return}for(var n=0,a=t.length;n<a;n++){if(t[n].contains(e)){f(e);return}}t=function(){var t=e.parentNode||e;return t.querySelectorAll(r)}();if(t.length>0){for(var s=0,a=t.length;s<a;s++){f(t[s])}}}function f(e){var t=document.createTreeWalker(e,4,null,false);while(t.nextNode()){if(t.currentNode.urNode&&!t.currentNode.urNode.whitespace){t.currentNode.urNode.scrubTargets.self=true}}}return new u(r)}(scrubbingSelectorsBlacklisted,scrubbingSelectorsWhitelisted,scrubbingScrubutils,coreEventtarget,coreConfig,utilsTrim,utilsIndexof,utilsIsstring);formfieldMetadata=function(e,t,r,n,i,a,s){var o="formfield/metadata";var u=[];var c=[];var d=[];var l=false;var f={"input-text":1,"input-password":2,"input-radio":3,"input-checkbox":4,"input-hidden":5,"input-button":6,"input-submit":7,"input-image":8,"input-reset":9,"input-file":10,"input-url":11,"input-number":12,"input-date":13,"input-datetime":14,"input-datetime-local":15,"input-time":16,"input-week":17,"input-month":18,"input-range":19,"input-search":20,"input-tel":21,"input-email":22,"input-color":23,select:24,"select-multiple":25,button:26,textarea:27};var h={addForm:function(t){var r,n=a.id(1),s=t.id||null,c=t.action||"none",l=t.encType==="multipart/form-data"?a.id(2):a.id(1),f,h,p;if(!s){return}if(i(u,s)!==-1){return}u.push(s);try{f=a.strLen(s.length);h=a.strLen(c.length);p=a.strLen([f,s,h,c,l].join("").length);r=[n,p,f,s,h,c,l].join("");d.push(r)}catch(t){e.fire("error:raise",t,o+"::addForm")}},addField:function(r,u){var l,h=a.id(2),p=u?u.id||u.name:null,g=r.name?p+"."+r.name:null,v=function(){var e=n.selector.selectFields(r.parentNode);if(i(e,r)!==-1){return n.scrubString(r.value)}return r.value}(),m=r.tabIndex||null,y=r.tabIndex||"",b=function(){var e=r.nodeName.toLowerCase();if(e==="input"){e+="-"+r.type}else if(e==="select"){e+=r.multiple?"-multiple":""}return f[e]}(),w,E,C,S;try{if(!g||!p){return}if(t.isFieldExcluded(r.name)){return}if(i(c,g)!==-1){return}c.push(g);w=p?a.strLen(p.length):a.strLen(0);E=a.strLen(g.length);b=a.id(b);C=a.strLen(s.getUtf8Bytes(v));if(y){y=a.tabIndex(y)}m=m?a.id(1):a.id(0);S=a.strLen([w,p,E,g,b,C,v,m,y].join("").length);l=[h,S,w,p,E,g,b,C,v,m,y].join("");d.push(l)}catch(t){e.fire("error:raise",t,o+"::addField")}},flush:function(){var t=new r,n={action:"fORMMETA2",source:d.join("")};if(!l||d.length===0){return}try{t.sendData(n)}catch(t){e.fire("error:raise",t,o+"::flush")}d=[]}};e.on("dom:scan:end",h.flush);e.on("instance:ready",function(){l=true;h.flush()});return h}(coreEventtarget,coreConfig,coreTransport,scrubbingManager,utilsIndexof,utilsNumberformat,utilsUtf16);utilsGetcomputedstyle=function(){var e=["background","font","padding","margin","overflow","display","position","float","width","height","box-sizing","visibility","z-index","color"];var t=document.createElement("div");return function(r){var n=window.getComputedStyle(r);t.style.cssText="";if(n){for(var i=0;i<e.length;i++){t.style.setProperty([e[i]],n[e[i]],"important")}}return t.style.cssText}}();eventSubmit=function(e,t,r,n,i,a,s,o,u,c,d,l){var f="event/submit";var h=function(e){d(a,e);function a(r){this.eventType=c.id(t.FORMSUBMIT);this.rto=o.output();this.webEvent=r;this.generatePayload();e.call(this);if(this.webEvent.type&&this.webEvent.type==="submit"){this.cache.flush()}}a.prototype.generatePayload=function(){var e;var t;var n=this.webEvent.target;if(this.webEvent.target.hasOwnProperty("urNode")&&this.webEvent.target.urNode.hasOwnProperty("virtualForm")){n=n.urNode.virtualForm}try{e=n.id;t=c.strLen(e.length);this.payload=[t,e]}catch(e){i.fire("error:raise",e,f+"::submit")}if(!r.get("passiveCapture")){this.processData(n)}};a.prototype.processData=function(e){var t=new n,r={action:"FORM",target:e.action,method:typeof e.method==="string"?e.method.toUpperCase():"POST",data:[]},i,a,o,u,c;s.assignScrubTargets(e);for(var d=0;d<e.elements.length;d++){i=e.elements[d].urNode;a=e.elements[d];if(typeof i==="undefined"){continue}o=a.type;u=a.name;c=l(i.scrubTargets.attr,"value")!==-1?s.scrubString(a.value):a.value;if(o&&(o==="button"||o==="submit"||o==="image"||o==="file")){continue}if(i.excluded){continue}if(i.name==="input"||i.name==="textarea"){if(typeof u!=="undefined"){if(o==="checkbox"||o==="radio"){if(a.checked){r.data.push(encodeURIComponent(u)+"="+encodeURIComponent(c))}}else{r.data.push(encodeURIComponent(u)+"="+encodeURIComponent(c))}}}else if(o==="select"){if(a.multiple){c=[];for(var f=0;f<a.options.length;f++){if(a.options[f].selected){c.push(encodeURIComponent(a.options[f].value))}}c.map(function(e){return s.scrubString(e)});r.data.push(encodeURIComponent(u)+"="+c.join(","))}else{r.data.push(encodeURIComponent(u)+"="+encodeURIComponent(c))}}}r.data=r.data.join("&");t.sendData(r)};return a}(e);return{init:function(e){return new h(e)}}}(eventUserevent,eventTypes,coreConfig,coreTransport,coreEventtarget,domDomutils,scrubbingManager,utilsRtime,utilsTrim,utilsNumberformat,utilsExtend,utilsIndexof);domVirtualformmanager=function(e,t,r,n,i,a){function s(){}s.prototype.applyVirtualFormRules=function(e,s){if(e.length>0){for(var o=0;o<e.length;o++){var u;var c=new t(e[o]);i.addForm(c);for(var d=0;d<e[o].triggerElements.length;d++){var l=document.querySelectorAll(e[o].triggerElements[d]);if(l.length===1){u=l[0];u.addEventListener("click",n.init);u.urNode.virtualForm=e[o]}}a.fire("dom:add:form",c);if(e[o].elementSelectors.length>0){var f=r(e[o].elementSelectors,s);for(var h=0;h<f.length;h++){if(f[h].hasOwnProperty("urNode")&&!f[h].urNode.hasOwnProperty("virtualForm")){f[h].urNode.virtualForm=c}}}}}};return new s}(coreConfig,domNode,utilsSelectnodes,eventSubmit,formfieldMetadata,coreEventtarget);domDomutils=function(e,t,r,n,i,a,s,o,u,c,d,l,f,h,p,g){var v=function(){var e;var t=document.doctype;if(t){e="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC "'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">";return e}return""}();var m=document.documentElement;var y=[];var b=[];var w=["INPUT","IMG","BR","HR","AREA","PARAM","META","LINK","TRACK","SOURCE","PICTURE","WBR","BASE","EMBED"];var E=1;var C=0;var S=function(){function e(e,t,r){this.context=e;this.startFn=t;this.endFn=r||null}e.prototype.walk=function(e){var t=e;if(this.startFn.call(this.context,e)===-1){return}var r=f.isIE()||f.isEdge()?HTMLCollection:RadioNodeList;if(e.firstChild&&e.firstChild instanceof r){e=e.childNodes[0]}else{e=e.firstChild}while(e){this.walk(e);e=e.nextSibling}if(this.endFn){this.endFn.call(this.context,t)}};return e}();var T=function(){function e(e){this.subtree=e||m;this.walker=new S(this,this.nodeProcessor);this.scanFlags={initIFrames:false,ffaDiscovery:false};n.on("dom:processnode",this.nodeProcessor.bind(this))}e.prototype.scan=function(){var e;var t;this.prescan();e=performance.now();this.walker.walk(this.subtree);t=performance.now();this.postscan()};e.prototype.prescan=function(){};e.prototype.postscan=function(){if(this.subtree.nodeType===1||this.subtree.nodeType===11){if(i.get("captureMode")===g.captureMode.SIMPLE){A(y)}else{_(this.subtree);if(this.scanFlags.ffaDiscovery){R(b);A(y);h.applyVirtualFormRules(i.getVirtualForms(),this.subtree)}if(this.subtree!==m&&this.scanFlags.initIframes){n.fire("dom:iframe:found")}r.assign(this.subtree)}}C++;n.fire("dom:scan:end")};e.prototype.nodeProcessor=function(e){if(e.__ur_uuid__){return}if(e instanceof NodeList){for(var r in e){if(e.hasOwnProperty(r)&&typeof e[r]==="object"){this.nodeProcessor(e[r])}}return}var s=["input","select","option","optgroup","textarea","button"];var o=e.nodeName.toLowerCase();var u={id:e.id,name:o,type:e.nodeType,attributes:e.attributes,value:typeof e.value==="string"?e.value:e.nodeValue,formField:s.indexOf(o)!==-1,parent:e.parentNode?e.parentNode.urNode:null,domNode:e};var c;e.__ur_uuid__=E;E++;u.uuid=e.__ur_uuid__;if(u.formField&&e.name&&i.isFieldExcluded(e.name)){u.excluded=true}u.scanId=C;if(C===0){n.fire("dom:scan:newnode",e.__ur_uuid__)}if(o==="iframe"){this.scanFlags.initIframes=true}if(o==="form"&&a(y,e)===-1){y.push(e);this.scanFlags.ffaDiscovery=true}if(u.formField&&u.name!=="option"&&u.name!=="optgroup"&&a(b,e)===-1){if(e.type==="hidden"){u.lastKnownValue=u.value}b.push(e);this.scanFlags.ffaDiscovery=true}c=new t(u);e.urNode=c};return e}();var N=function(){function e(e){this.html="";this.openTags=[];this.excludedAttributes=i.getExcludedAttributes();this.startNode=e||document.documentElement;this.subtree=e;this.computedStyleSelectors=i.getComputedStyleSelectors();this.specialAttr=["selected","checked","disabled","multiple"];this.walker=new S(this,this.processNode,this.closePairedTag);if(!e&&v){this.html+=function(){var e=document.doctype.nextSibling;var t="";while(e){if(e.nodeType===8){t+="<!--"+e.nodeValue+"-->"}e=e.nextSibling}return t}()}}e.prototype.export=function(){var e=/<urscrub\b[^>]*?\/>|<urscrub\b[^>]*>(?:(?!<urscrub\b[^>]*>|<\/urscrub>)[\S\s])*<\/urscrub>/i;p.assignScrubTargets(this.startNode);this.walker.walk(this.startNode);while(this.html!==(this.html=this.html.replace(e,"")));return!this.subtree?v+this.html:this.html};e.prototype.processNode=function(e){var t;if(e instanceof NodeList){for(var r in e){if(e.hasOwnProperty(r)&&typeof e[r]==="object"){this.processNode(e[r])}}return}if(!e.__ur_uuid__){x.scan(e)}var n=e.urNode;if(!n){return}if(e.nodeType===8){if(i.get("captureComments")){this.html+="\x3c!--"+e.data+"--\x3e"}return}if(e.nodeType===3){if(n.scrubTargets.self){this.html+=p.scrubString(e.data)}else{this.html+=P(e.data)}}else if(e.nodeType===1){if(n.name==="noscript"){return-1}if(n.name==="img"){if(i.isPageExcluded(e.src)){return}}if(n.formField&&i.isFieldExcluded(e.id||e.name)){return}if(a(w,n.name.toUpperCase())===-1){this.openTags.push(n.name)}this.html+="<"+n.name;if(n.name==="iframe"){if(i.isPageExcluded(e.src)){return}if(!e.getAttribute("data-ur-storage")){this.html+=' src="{{fpath:'+e.getAttribute("data-ur-fpath")+'}}"'}else{return}}if(this.computedStyleSelectors.length>0){for(var s=this.computedStyleSelectors.length-1;s>=0;s--){if(e.matches(this.computedStyleSelectors[s])){t=l(e);this.html+=' style="'+t+'"'}}}if(e.attributes){var o=Array.prototype.slice.call(e.attributes);for(var u=0;u<o.length;u++){if(this.excludedAttributes.indexOf(o[u].name)!==-1){continue}if(o[u].name==="urscrub"||o[u].name==="ur-nodeupdate"||o[u].name.match(/((x|data)-)?ng[-_:](bind|click|if|model|form|repeat|value|switch|hide|show)(-(html|template|options|when))?/)||a(this.specialAttr,o[u].name)!==-1){continue}if(e.urNode.name==="iframe"&&e.getAttribute("data-ur-fpath")&&(o[u].name==="src"||o[u].name==="data-ur-ptoken"||o[u].name==="data-ur-rtimebase")){continue}if(a(this.specialAttr.concat(["value"]),o[u].name)===-1){if(a(e.urNode.scrubTargets.attr,o[u].name)!==-1){this.html+=" "+o[u].name+'="'+p.scrubString(o[u].value)+'"'}else if(o[u].name==="required"){this.html+=" required"}else{this.html+=" "+o[u].name+'="'+I(o[u].value)+'"'}}}}if(e.urNode.name==="input"&&a(["button","submit","image"],e.type)===-1&&e.value){if(a(e.urNode.scrubTargets.attr,"value")!==-1){this.html+=' value="'+p.scrubString(e.value)+'"'}else{this.html+=' value="'+I(e.value)+'"'}}for(var c=0,d=this.specialAttr.length;c<d;c++){if(e[this.specialAttr[c]]){this.html+=x.isXhtml?this.specialAttr[c]+'="'+this.specialAttr[c]+'"':" "+this.specialAttr[c]}}if(n.uuid){this.html+=' urid="'+n.uuid+'"'}this.html+=x.isXhtml&&a(w,n.name.toUpperCase())!==-1?" />":">"}};e.prototype.closePairedTag=function(e){var t=e.urNode;if(e.nodeType===1&&a(w,e.nodeName.toUpperCase())===-1){if(this.openTags[this.openTags.length-1]===t.name){this.html+="</"+this.openTags.pop()+">"}}};return e}();var x={scan:function(e){var t=new T(e);t.scan()},toString:function(e){var t=new N(e);return t.export()},isXhtml:function(){return v&&a(v,"xhtml")!==-1}(),findParentForm:function(e){var t=e.urNode;if(t.virtualForm){return t.virtualForm}if(t.formField&&e.form){return e.form||null}return null},scanCount:function(){return C}};function I(e){if(typeof e==="undefined"){return""}return String(e.replace(/["|<>]/g,function(e){switch(e){case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;";case"|":return"&#124;"}}))}function _(e){var t=i.getStateChangeExclusionSelectors();var r=t.length>0?e.querySelectorAll(t.join(",")):null;if(r){for(var n=0;n<r.length;n++){if(r[n].urNode){r[n].urNode.stateChanges={excluded:true}}}}}function P(e){e=e.replace(/\t/g," ");e=e.replace(/ {2,}/g," ");e=e.replace(/(\r\n|\n|\r){2,}/g,"$1");e=e.replace(/(\r\n|\r|\n) /,"$1");return e}function A(e){for(var t=0;t<e.length;t++){if(i.get("formAnalysis")&&i.get("captureMode")!==g.captureMode.SIMPLE){d.addForm(e[t])}n.fire("dom:add:form",e[t])}}function R(e){var t;for(var r=0;r<e.length;r++){t=x.findParentForm(e[r]);if(t){if(i.get("formAnalysis")){d.addField(e[r],t)}e[r].urNode.formId=t.id}n.fire("dom:add:formfield",e[r])}}return x}(core,domNode,domTriggermanager,coreEventtarget,coreConfig,utilsIndexof,utilsTrim,utilsPluck,utilsExtract,utilsExtend,formfieldMetadata,utilsGetcomputedstyle,utilsUseragent,domVirtualformmanager,scrubbingManager,varConstants);coreCapture=function(e,t,r,n,i,a,s,o,u,c){var d=0;var l={newStep:function(e){i.ready=false;d=0;n.currentUri=e;n.resetTimings();i.init();window.setTimeout(function(){l.page()},1e3)},page:function(o){var c;var l={action:function(){if(i.isChild&&r.get("iframes")){return"IFRAME"}if(o&&o.action){return o.action.toUpperCase()}return d===0?"PAGE":"DOM"}()};var f=n.payloadOptions;u(f,o);c=new t(f.callback);if(l.action!=="DOM"){l.requestStart=n.requestStart;l.responseStart=n.responseStart;l.responseEnd=n.responseEnd;if(l.responseEnd>(new Date).getTime()||l.responseEnd<l.responseStart){l.responseEnd=l.responseStart+1e3}}if(f.captureSource){s.scan();l.source=s.toString();if(d===0){e.fire("dom:source-captured")}}if(f.captureDimensions){l.dimensions=[window.innerWidth,window.innerHeight].join(",")}if(i.isChild||f.captureReferrer&&document.referrer){l.referrer=i.isChild?i.referrer:document.referrer}if(f.captureCookies){l.cookies=document.cookies}c.sendData(l);var h=(new Date).getTime();if(d===0){a.flush()}d++},signal:function(){var e=new t;var r={action:c.ACTION_PAGE_PRECURSOR};if(i.isChild||n.payloadOptions.captureReferrer&&document.referrer){r.referrer=i.isChild?i.referrer:document.referrer}if(n.payloadOptions.captureCookies){r.cookies=document.cookie}e.sendData(r)},xhr:function(n){var i=new t;var a={action:"AJAX"};u(a,n);if(r.isXhrExcluded(a.target)){return}try{i.sendData(a)}catch(t){e.fire("error:raise",t,"core/capture:xhr() failed")}},event:function(r){var n=new t;var i={action:"EVENT2"};u(i,r);try{n.sendData(i)}catch(t){e.fire("error:raise",t,"core/capture:event() failed")}},keepAlive:function(){var r=new t;var n={action:"KEEP-ALIVE"};try{r.sendData(n)}catch(t){e.fire("error:raise",t,"core/capture:keepAlive() failed")}}};e.on("capture:page:newstep",function(e){l.newStep(e)});return l}(coreEventtarget,coreTransport,coreConfig,corePage,sessionInstance,eventCache,domDomutils,formfieldMetadata,utilsExtend,varConstants);sessionSession=function(urMessaging,urEvent,config,capture,urCookie,extract,urInstance){var activityPoller;var lastActivity=(new Date).getTime();var started=false;var expired=false;var keepAliveInterval=12e4;var instances=[];var session={getInstanceByIndex:function(e){return extract(instances,"fpath",e)},registerChildInstance:function(e){instances.push(e)},registerChildInstanceUrl:function(e){var t=document.querySelector('[data-ur-fpath="'+e.fpath+'"]');t.setAttribute("data-ur-currentsrc",e.url)},initSelf:function(){urInstance.fpath=window.frameElement.getAttribute("data-ur-fpath");urInstance.ptoken=window.frameElement.getAttribute("data-ur-ptoken");urInstance.rtimeBase=window.frameElement.getAttribute("data-ur-rtimebase");urInstance.referrer=window.top.document.URL;urEvent.fire("readystate:changed",{fpath:urInstance.fpath,referrer:urInstance.referrer,rtime:urInstance.rtimeBase,ptoken:urInstance.ptoken})},initChildInstance:function(e){urInstance.ptoken=e.ptoken;urInstance.rtimeBase=e.rtimeBase;urInstance.referrer=e.referrer;urInstance.fpath=e.fpath;urEvent.fire("readystate:changed",{fpath:urInstance.fpath,referrer:urInstance.referrer,rtime:urInstance.rtimeBase,ptoken:urInstance.ptoken})},isActive:function(){return!expired}};function getWindowFromPath(fpath){var indexes=fpath.split(",");var str="";for(var i=0;i<indexes.length;i++){
str+="window.frames["+indexes[i]+"]."}return eval(str.replace(/\.$/,""))}function poll(){if(window===null){return}if(activityPoller){window.clearTimeout(activityPoller)}activityPoller=window.setTimeout(keepAlive,keepAliveInterval)}function keepAlive(){var e=(new Date).getTime();var t=config.get("pageTimeout");var r=(t<=120?t:120)*6e4;if(e-lastActivity>r){urEvent.fire("session:expired");return}capture.keepAlive();poll()}urEvent.on("session:activity",function(e){lastActivity=e.timestamp;if(config.get("iframes")){if(urInstance.topInstance){for(var t in instances){if(instances.hasOwnProperty(t)&&(!e.token||e.sender&&t!==e.sender)){urMessaging.send(getWindowFromPath(instances[t]),JSON.stringify({fn:"fireEvent",args:["session:activity",{timestamp:e.timestamp,sender:urInstance.token}]}))}}}else if(!e.sender){urMessaging.send(window.top,JSON.stringify({fn:"fireEvent",args:["session:activity",{timestamp:(new Date).getTime(),sender:urInstance.token}]}))}}poll()});urEvent.on("capture:ready",function(){if(!started){started=true;poll()}});return session}(coreMessaging,coreEventtarget,coreConfig,coreCapture,coreCookie,utilsExtract,sessionInstance);varCallback=function(e,t,r){this.fn=e;this.context=t;this.args=r};varIframes=function(e,t,r,n,i,a,s){function o(e){for(var t=0;t<window.frames.length;t++){if(window.frames[t]===e.contentWindow){return t}}}function u(){var e=function(){if(this.attributes.getNamedItem("data-ur-fpath")){return this.attributes.getNamedItem("data-ur-fpath").value}return o(this)}.bind(this)();if(this.getAttribute("data-ur-xdomain")==="true"){t.send(window.frames[e],JSON.stringify({fn:"initChildInstance",args:[{ptoken:n.token,rtimeBase:n.rtimeBase,referrer:document.URL,fpath:e}]}));i.registerChildInstance({fpath:e,xdomain:true})}}function c(t){t=t||document;var r=t===document?"document":"subtree";var a=t.querySelectorAll("iframe:not([data-ur-storage]):not([data-ur-fpath]):not([data-ur-indexed])");var s;for(var c=0;c<a.length;c++){if(d(c)){a[c].setAttribute("data-ur-xdomain",true);a[c].setAttribute("data-ur-indexed",true)}s=o(a[c]);if(s>=0){if(e.isPageExcluded(a[c].src)){continue}i.registerChildInstance({fpath:s,xdomain:false});a[c].setAttribute("data-ur-fpath",s);a[c].setAttribute("data-ur-ptoken",n.token);a[c].setAttribute("data-ur-rtimebase",n.rtimeBase)}else{a[c].setAttribute("data-ur-indexed",true)}a[c].addEventListener("load",u.bind(a[c]),true);if(a[c].readyState==="complete"){u.call(a[c])}}}function d(e){try{var t=s.getTLD();var r=s.getTLD(window.frames[e].document.domain);if(t===r){return false}return true}catch(e){return true}}r.on("dom:iframe:found",c);return{init:c}}(coreConfig,coreMessaging,coreEventtarget,sessionInstance,sessionSession,utilsIndexof,varDomain);utilsThrottle=function(){function e(e,t,r){var n;var i;return function a(){var s=r||this;var o=(new Date).getTime();var u=arguments;if(n&&o<n+t){clearTimeout(i);i=setTimeout(function(){n=o;e.apply(s,u)},t)}else{n=o;e.apply(s,u)}}}return e}();eventSynth=function(){var e=function(e,t,r){this.event=null;this.eventType=e;this.target=t||null;r=r||null;try{this.event=new Event(this.eventType)}catch(e){try{this.event=document.createEvent("HTMLEvents");this.event.initEvent(this.eventType,true,true)}catch(e){}}this.constructor=this.event.constructor;if(this.target&&r){this.dispatch(this.target)}};e.prototype.dispatch=function(e){this.target=e;if(this.event){this.target.dispatchEvent(this.event);return this}return this};return e}();eventFormfield=function(e,t,r,n,i,a,s,o,u,c,d,l){var f=[],h="event/formfield",p=function(t){o(n,t);function n(e){this.eventType=i.id(d.FIELDFOCUS);this.rto=r.output();this.webEvent=e;this.applyNodeCaptureTriggers("focus");this.generatePayload();t.call(this)}n.prototype.generatePayload=function(){var t,r,n,s,o,u;try{t=this.webEvent.target;r=this.webEvent.target.urNode;if(r.name==="button"){return}n=typeof r.formId!=="undefined"?r.formId+"."+t.name:t.name;s=i.strLen(a.getUtf8Bytes(n));o=this.webEvent.target.__ur_uuid__;u=i.strLen(o.toString().length);this.payload=[s,n,u,o]}catch(t){e.fire("error:raise",t,h+"::FieldFocusEvent")}};return n}(c),g=function(t){o(n,t);function n(e){this.eventType=i.id(d.FIELDBLUR);this.rto=r.output();this.webEvent=e;this.applyNodeCaptureTriggers("blur");this.generatePayload();t.call(this)}n.prototype.generatePayload=function(){var t,r,n,o,u,c;try{t=this.webEvent.target;r=this.webEvent.target.urNode;var d=s(f,r.__ur_uuid__);f.splice(d,1);if(r.name==="button"){return}n=typeof r.formId!=="undefined"?r.formId+"."+t.name:t.name;o=i.strLen(a.getUtf8Bytes(n));u=this.webEvent.target.__ur_uuid__;c=i.strLen(u.toString().length);this.payload=[o,n,c,u]}catch(t){e.fire("error:raise",t,h+"::FieldBlurEvent")}};return n}(c),v=function(n){o(u,n);function u(e){this.eventType=i.id(d.FIELDCHANGE);this.rto=r.output();this.webEvent=e;this.applyNodeCaptureTriggers("change");this.generatePayload();n.call(this);if(e.isSynthesized){e.stopPropagation()}}u.prototype.checkHiddenInputChanges=function(){var e=document.querySelectorAll("input[type=hidden]");for(var t=e.length-1;t>=0;t--){var r=e[t];if(r.urNode&&r.urNode.hasOwnProperty("lastKnownValue")){if(r.value!==r.urNode.lastKnownValue){new l("change",r,true);r.urNode.lastKnownValue=r.value}}}};u.prototype.generatePayload=function(){var r,n,o,u,c,d,l,f,p;try{r=this.webEvent.target;n=this.webEvent.target.urNode;n.onchange();o=typeof n.formId!=="undefined"?n.formId+"."+r.name:r.name;u=i.strLen(a.getUtf8Bytes(o));if(n.name==="select"){d=[];if(!r.selectedOptions){if(r.selectedIndex){d.push(r.selectedIndex)}}else{for(var g=0;g<r.selectedOptions.length;g++){d.push(r.selectedOptions[g].index)}}c=d.join(",")}else if(n.name==="input"&&(r.getAttribute("type")==="checkbox"||r.getAttribute("type")==="radio")){c=r.checked?1:0}else{c=function(){var e=t.selector.selectFields(r.parentNode);if(s(e,r)!==-1){return t.scrubString(r.value)}return r.value}()}l=i.strLen(a.getUtf8Bytes(c.toString()));f=this.webEvent.target.__ur_uuid__;p=i.strLen(f.toString().length);this.payload=[u,o,l,c,p,f];this.checkHiddenInputChanges()}catch(t){e.fire("error:raise",t,h+"::FieldChangeEvent")}};return u}(c),m=function(t){o(n,t);function n(e){this.eventType=i.id(d.FIELDKEYPRESS);this.rto=r.output();this.webEvent=e;this.applyNodeCaptureTriggers("keypress");this.generatePayload();t.call(this)}n.prototype.generatePayload=function(){var t,r,n,o,u,c,d;try{t=this.webEvent.target;r=this.webEvent.target.urNode;if(s(f,r.__ur_uuid__)!==-1){return}f.push(r.__ur_uuid__);n=typeof r.formId!=="undefined"?r.formId+"."+t.name:t.name;o=i.strLen(a.getUtf8Bytes(n));u=i.keycode(0);c=this.webEvent.target.__ur_uuid__;d=i.strLen(c.toString().length);this.payload=[o,n,u,d,c]}catch(t){e.fire("error:raise",t,h+"::FieldKeypressEvent")}};return n}(c),y=function(t){var n=[9,13];o(u,t);function u(e){if(s(n,e.keyCode)===-1){return}this.eventType=i.id(d.FIELDKEYPRESS);this.rto=r.output();this.webEvent=e;this.applyNodeCaptureTriggers("keypress");this.generatePayload();t.call(this)}u.prototype.generatePayload=function(){var t,r,n,s,o,u,c;try{t=this.webEvent.target;r=this.webEvent.target.urNode;n=typeof r.formId!=="undefined"?r.formId+"."+t.name:t.name;s=i.strLen(a.getUtf8Bytes(n));o=i.keycode(this.webEvent.keyCode);u=this.webEvent.target.__ur_uuid__;c=i.strLen(u.toString().length);this.payload=[s,n,o,c,u]}catch(t){e.fire("error:raise",t,h+"::FieldKeydownEvent")}};return u}(c);return{bindings:{focus:function(e){window.setTimeout(function(){new p(e)},0)},blur:function(e){window.setTimeout(function(){new g(e)},0)},change:function(e){window.setTimeout(function(){new v(e)},0)},keypress:function(e){window.setTimeout(function(){new m(e)},0)},keydown:function(e){window.setTimeout(function(){new y(e)},0)}}}}(coreEventtarget,scrubbingManager,utilsRtime,utilsTrim,utilsNumberformat,utilsUtf16,utilsIndexof,utilsExtend,domDomutils,eventEvent,eventTypes,eventSynth);eventScroll=function(e,t,r,n,i,a,s){var o="event/scroll";function u(e){this.eventType=i.id(s.WINDOWSCROLL);this.webEvent=e;this.rto=t.output();this.generatePayload();a.call(this)}r(u,a);u.prototype.generatePayload=function(){try{var t=i.xy(window.pageXOffset);var r=i.xy(window.pageYOffset);if(t<0||t>2147483647||r<0||r>2147483647){return}this.payload=[t,r]}catch(t){e.fire("error:raise",t,o+"::ScrollEvent")}};u.fire=function e(t){return new u(t)};return u}(coreEventtarget,utilsRtime,utilsExtend,utilsTrim,utilsNumberformat,eventUserevent,eventTypes);eventTouch=function(e,t,r,n,i,a,s){var o="event/touch";var u;function c(e,t){var n=r.output();var a=i.id(t);var o;var u;var c;var d;var f;var h=[];var p;var g;var v;for(var m=0;m<e.touches.length;m++){u=new l(e.touches[m]);h.push(u.get())}c=i.strLen(h.length);f=i.strLen(h.join("").length);p=[a,c,f,d].join("");g=i.strLen(o.length);v=[n,g,p].join("");s.write(v)}function d(t){return function(r){try{return c(r,t)}catch(t){e.fire("err:raise",t,o+"::handleTouchByEventId")}}}function l(e){this.id=e.identifier;this.x=e.clientX;this.y=e.clientY}l.prototype.get=function(){var e=i.strLen(this.id.length);var t=i.xy(this.x);var r=i.xy(this.y);return[e,this.id,t,r].join("")};u={start:d(6),end:d(7),move:d(8),cancel:d(9)};return{init:function(){if(t.addEventListener){t.addEventListener("touchstart",u.start,false);t.addEventListener("touchend",u.end,false);t.addEventListener("touchmove",u.move,false);t.addEventListener("touchcancel",u.cancel,false)}}}}(coreEventtarget,varDocument,utilsRtime,utilsTrim,utilsNumberformat,domDomutils,eventCache);eventLoad=function(e,t,r,n,i,a,s,o,u,c,d,l,f){var h=false;var p=false;var g=null;var v=null;function m(e){if(e){}if(n.isChild){try{if(window.top.urCapture.getConfig().iframes){if(!n.ready){r.initSelf()}}else{u.set("iframes",false);n.ready=true;o.fire("instance:ready")}}catch(e){n.xdomain=true}new g(e,0)}else{if(u.get("iframes")){a.init()}}o.fire("dom:content:loaded");if(u.get("autoCapture")&&!u.get("passiveCapture")&&v.event==="DOMContentLoaded"){window.setTimeout(function(){p=true;c.page()},v.delay)}else{window.setTimeout(y,u.get("windowLoadTimeout"))}}function y(){if(!h&&!p&&u.get("autoCapture")&&!u.get("passiveCapture")){p=true;c.page()}}g=function(e){d(r,e);function r(r,n){this.eventType=l.id(t.WINDOWLOAD);this.webEvent=r;this.pageType=l.pageType(n);this.rto=f.output();this.generatePayload();e.call(this)}r.prototype.generatePayload=function(){var e=l.strLen(document.URL.length);this.payload=[this.pageType,e,document.URL]};return r}(e);return{init:function(){v=u.getAutoCaptureRule(document.URL,n.isChild?"iframe":"page");if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",function(e){new m(e)},false)}else{new m}window.addEventListener("load",function(){h=true;if(u.get("autoCapture")&&!u.get("passiveCapture")&&v.event==="load"){window.setTimeout(function(){c.page()},v.delay)}},false)}}}(eventEvent,eventTypes,sessionSession,sessionInstance,varConstants,varIframes,domDomutils,coreEventtarget,coreConfig,coreCapture,utilsExtend,utilsNumberformat,utilsRtime);eventUnload=function(e,t,r,n,i,a){function s(){var e=new t;e.sendData({action:a.ACTION_PAGE_UNLOAD})}return{init:function(){window.addEventListener("beforeunload",function(){if(i.isFirefox()){return n.flush()}n.flush();if(a.captureMode.SIMPLE){}e.fire("navigation:page:unloading");s()},true);window.addEventListener("unload",function(){},true)}}}(coreEventtarget,coreTransport,coreCapture,eventCache,utilsUseragent,varConstants);eventResize=function(e,t,r,n,i,a){var s="event/resize";var o=null;var u;var c=function(e){this.rto=t.output();this.eventType=n.id(a.WINDOWRESIZE);this.generatePayload();e.call(this)};var d=function(t){r(i,t);function i(){if(o){window.clearTimeout(u)}else{o=true;e.fire("resize:started")}u=window.setTimeout(function(t){o=false;e.fire("resize:ended");c.call(this,t)}.bind(this,t),500)}i.prototype.generatePayload=function(){var t;var r;try{t=n.xy(document.documentElement.clientWidth);r=n.xy(document.documentElement.clientHeight);this.payload=[t,r]}catch(t){e.fire("error:raise",t,s+"::ResizeEvent")}};return i}(i);return{bind:function(e){window.setTimeout(function(){new d(e)},0)}}}(coreEventtarget,utilsRtime,utilsExtend,utilsNumberformat,eventUserevent,eventTypes);domPagemapping=function(e,t){var r;function n(){this.nodeList=[];this.changeMap={}}n.prototype.addNode=function(e){if(t(this.nodeList,e)===-1){this.nodeList.push(e);return true}return false};n.prototype.removeNode=function(e){var r=t(this.nodeList,e);if(r){delete this.nodeList[e];return true}return false};n.prototype.hasNode=function(e){return t(this.nodeList,e)!==-1};n.prototype.logChange=function(e,t){var r=t.name,n=t.value,i=t.rtime;if(!this.changeMap[e]){this.changeMap[e]={}}if(!this.changeMap[e][r]){this.changeMap[e][r]={}}this.changeMap[e][r]={rtime:i,value:n}};n.prototype.hasNodeChanged=function(e,t){var r=t.name,n=t.value;if(!this.changeMap[e]||!this.changeMap[e][r]||this.changeMap[e][r].value!==n){this.logChange(e,t);return true}return false};r=new n;e.on("dom:scan:newnode",function(e){r.addNode("__uuid_"+e)});return r}(coreEventtarget,utilsIndexof);utilsSort=function(e,t){function r(e,r){if(e[t]===r[t]){return 0}return e[t]>r[t]?1:-1}return e.sort(r)};utilsToarray=function(e){var t=[];for(var r in e){if(e.hasOwnProperty(r)){t.push(e[r])}}return t};statechangeMutationobserversObserver=function(){function e(){}e.prototype.disconnect=function(){this.observer.disconnect();return this};return e}();statechangeMutationobserversAttributes=function(e,t){function r(){this.observer=new MutationObserver(n)}r.prototype=new e;r.prototype.connect=function(){this.observer.observe(document.documentElement,{childList:false,attributes:true,characterData:false,subtree:true,attributeOldValue:true,attributeFilter:[]});return this};var n=function(e){t.fire("state:change",e,"attributes")};return r}(statechangeMutationobserversObserver,coreEventtarget);statechangeMutationobserversChildlist=function(e,t){function r(){this.observer=new MutationObserver(n)}r.prototype=new e;r.prototype.connect=function(){this.observer.observe(document.documentElement,{childList:true,attributes:false,characterData:false,subtree:true});return this};var n=function(e){t.fire("state:change",e,"childList")};return r}(statechangeMutationobserversObserver,coreEventtarget);statechangeMutationobserversCharacterdata=function(e,t){function r(){this.observer=new MutationObserver(n)}r.prototype=new e;r.prototype.connect=function(){this.observer.observe(document.documentElement,{childList:false,attributes:true,characterData:true,subtree:true,characterDataOldValue:true});return this};var n=function(e){t.fire("state:change",e,"characterData")};return r}(statechangeMutationobserversObserver,coreEventtarget);statechangeObservers=function(e,t,r,n){var i={AttributesObserver:t,ChildListObserver:r,CharacterDataObserver:n};return i}(coreConfig,statechangeMutationobserversAttributes,statechangeMutationobserversChildlist,statechangeMutationobserversCharacterdata);eventState=function(e,t,r,n,i,a,s,o,u,c,d,l,f,h,p,g,v,m,y,b,w){var E={};var C={};var S=null;var T=null;var N=0;var x=null;var I={id:"id",title:"title",href:"href",class:"className",disabled:"disabled"};var _=["script","urscrub"];var P=function(e){function t(){this.state=r.STATE_CHANGE_ENGINE_STOPPED;this.observers={};this.ready=false}t.prototype.init=function(){this.observers={attributes:new e.AttributesObserver,childList:new e.ChildListObserver,characterData:new e.CharacterDataObserver};this.ready=true};t.prototype.connectObservers=function(){var e=Object.keys(this.observers);for(var t=0,n=e.length;t<n;t++){this.observers[e[t]].connect()}this.state=r.STATE_CHANGE_ENGINE_RUNNING;return this};t.prototype.disconnectObservers=function(){var e=Object.keys(this.observers);for(var t=0,r=e.length;t<r;t++){this.observers[e[t]].disconnect()}};t.prototype.pause=function(){this.state=r.STATE_CHANGE_ENGINE_PAUSED;return this};t.prototype.restart=function(){this.state=r.STATE_CHANGE_ENGINE_RUNNING;if(S&&C[S].length>0){F()}return this};return new t}(m);var A=function(e){l(t,e);function t(t){this.eventType=u.id(b.NODEADDED);this.rto=o.format(t.rtime);this.changeSpec=t;this.generatePayload();e.call(this)}t.prototype.generatePayload=function(){var e,t,r,n,a,s,o,d,l;e=u.id(this.changeSpec.mode);t="";r=u.strLen(t.length);n="";a=u.strLen(n.length);s=this.changeSpec.ref.__ur_uuid__;o=u.strLen(s.toString().length);d=i.toString(this.changeSpec.node);l=u.strLen(c.getUtf8Bytes(d));if(d===""){this.payload=null;return}this.payload=[e,r,t,a,n,o,s,l,d]};return t}(y);var R=function(e){l(t,e);function t(t){this.eventType=u.id(b.NODEREMOVED);this.rto=o.format(t.rtime);this.changeSpec=t;this.generatePayload();e.call(this)}t.prototype.generatePayload=function(){var e,t;e=this.changeSpec.node.__ur_uuid__;t=u.strLen(e.toString().length);this.payload=[t,e]};return t}(y);var O=function(e){l(t,e);function t(t){this.eventType=u.id(b.NODECHANGED);this.rto=o.format(t.rtime);this.changeSpec=t;this.generatePayload();e.call(this)}t.prototype.generatePayload=function(){var e,t,r,n,i,a;i=this.changeSpec.uuid;a=u.strLen(i.toString().length);e=this.changeSpec.name;t=u.strLen(c.getUtf8Bytes(e));r=String(this.changeSpec.value)||"";n=c.getUtf8Bytes(r);n=u.strLen(n>0?n:0);this.payload=[a,i,t,e,n,r]};return t}(y);function L(e){var t=[];for(var r in e){if(e.hasOwnProperty(r)){t=t.concat(e[r].attrChanges);t=t.concat(e[r].updates);t=t.concat(e[r].nodesAdded);t=t.concat(e[r].nodesRemoved)}}return p(t,"sequenceId")}function k(e){var t=0;for(var r=0;r<e.length;r++){if(e[r].rtime===t){e[r].rtime+=1}else if(e[r].rtime<t){e[r].rtime=t+1}switch(h.getConstructorName(e[r])){case"NodeAttributeChange":new O(e[r]);break;case"NodeAddition":new A(e[r]);break;case"NodeRemoval":if(e[r].uuid){new R(e[r])}break;case"NodeUpdate":new O(e[r]);break}t=e[r].rtime}}function M(e){var t={};if(!window.urCapture.pageCaptured()){return null}j.call(t,e);X.call(t,e);H.call(t,e);B.call(t,e);return t}function D(e){for(var t in e){if(e.hasOwnProperty(t)){if(e[t].attrChanges.length>0){e[t].normalizeAttributeChanges()}if(e[t].nodesAdded.length===0&&e[t].nodesRemoved.length===0&&e[t].updates.length===0){continue}e[t].flatten();if(e[t].updates.length>0){e[t].useUpdateOnly()}if(e[t].nodesAdded.length>0&&e[t].nodesRemoved.length>0){e[t].removeObsolete()}if(e[t].nodesAdded.length===0&&e[t].nodesRemoved.length===0&&e[t].updates.length===0&&e[t].attrChanges.length===0){delete e[t]}}}}function F(){var e;var t;T=S;S=null;J(C[T]);e=M(E[T]);D(e);t=L(e);k(t);delete E[T];delete C[T]}function U(e){this.target=e.target;this.sequenceId=e.sequenceId;this.rtime=e.rtime}function NodeUpdate(e){this.name="ur-nodeupdate";this.value=e.value;U.call(this,e)}function NodeAddition(e){this.node=e.node;this.value=e.value;this.mode=e.mode;this.ref=e.ref;U.call(this,e)}function NodeRemoval(e){this.uuid=e.node.__ur_uuid__;this.node=e.node;U.call(this,e)}function NodeAttributeChange(e){this.uuid=e.target.__ur_uuid__;this.name=e.attribute;this.value=e.value;U.call(this,e)}function q(){this.attrChanges=[];this.nodesAdded=[];this.nodesRemoved=[];this.updates=[];this.flattened=[]}q.prototype={registerAttributeChange:function(e){this.attrChanges.push(e)},registerUpdate:function(e){this.updates.push(e)},registerNodeAddition:function(e){this.nodesAdded.push(e)},registerNodeRemoval:function(e){this.nodesRemoved.push(e)},flatten:function(){var e=[].concat(this.nodesAdded,this.nodesRemoved,this.attrChanges,this.updates);this.flattened=p(e,"sequenceId")},useUpdateOnly:function(){var e,t,r;e=p([].concat(this.updates),"sequenceId");t=e.pop();r=this.flattened.pop();t.value=i.toString(t.target);t.sequenceId=r.sequenceId;t.rtime=r.rtime;this.updates=[t];this.nodesAdded=[];this.nodesRemoved=[]},normalizeAttributeChanges:function(){var e=p(this.attrChanges,"sequenceId"),t={};for(var r in e){if(e.hasOwnProperty(r)){t[e[r].name]=e[r]}}this.attrChanges=g(t)},removeObsolete:function(){var e=p([].concat(this.nodesAdded,this.nodesRemoved),"sequenceId"),t={},r={};for(var n in e){if(e.hasOwnProperty(n)){if(h.getConstructorName(e[n])==="NodeRemoval"){if(t[e[n].node.__ur_uuid__]){delete t[e[n].node.__ur_uuid__];continue}else{r[e[n].node.__ur_uuid__]=e[n]}}if(h.getConstructorName(e[n])==="NodeAddition"){t[e[n].node.__ur_uuid__]=e[n]}}}this.nodesAdded=g(t);this.nodesRemoved=g(r)}};function B(e){var t,r=e.attributeChanges;for(var n=0;n<r.length;n++){t="__uuid_"+r[n].target.__ur_uuid__;if(!this[t]){this[t]=new q}if(a.hasNodeChanged(t,r[n])){this[t].registerAttributeChange(r[n])}}}function H(e){var t,r=e.nodeUpdates;for(var n=0;n<r.length;n++){t="__uuid_"+r[n].target.__ur_uuid__;r[n].uuid=r[n].target.__ur_uuid__;if(!this[t]){this[t]=new q}r[n].value=i.toString(r[n].target);this[t].registerUpdate(r[n])}}function j(e){var t;var r=e.nodeAdditions;for(var n=0;n<r.length;n++){t="__uuid_"+r[n].target.__ur_uuid__;if(!this[t]){this[t]=new q}this[t].registerNodeAddition(r[n])}}function X(e){var t,r=e.nodeRemovals;for(var n=0;n<r.length;n++){t="__uuid_"+r[n].target.__ur_uuid__;if(!this[t]){this[t]=new q}this[t].registerNodeRemoval(r[n])}}function V(e){var n=t.get("pauseOnResize");var i=t.get("pauseOnResizeCaptureMode");if(!urCapture.pageCaptured()){S=null;E={};return}if(S){window.clearTimeout(x);if(P.state===r.STATE_CHANGE_ENGINE_PAUSED&&i==="LAST"){C[S]=[{ts:(new Date).getTime(),records:e}]}else{C[S].push({ts:(new Date).getTime(),records:e})}}else{S=(new Date).getTime();E[S]={attributeChanges:[],nodeUpdates:[],nodeAdditions:[],nodeRemovals:[]};C[S]=[];C[S].push({ts:(new Date).getTime(),records:e})}if(k&&urCapture.pageCaptured()){if(P.state===r.STATE_CHANGE_ENGINE_RUNNING){x=window.setTimeout(F,t.get("stateChangeBatchingThreshold"))}}}function G(e){var t=e.nextElementSibling;return t&&e.__ur_uuid__&&t.__ur_uuid__<e.__ur_uuid__?2:1}function J(e){var n=[];var a=false;var u=[];var c=null;var l=false;var h=[];var p=false;for(var g=0;g<e.length;g++){var v=e[g].records;var m=e[g].ts;for(var y=0;y<v.length;y++){var b=v[y];if(t.get("captureMode")===r.captureMode.SIMPLE||!b.target.urNode||b.target.urNode.stateChanges.excluded||b.type==="characterData"&&b.target.parentNode.urNode.stateChanges.excluded){continue}switch(b.type){case"childList":if(f(_,b.target.nodeName.toLowerCase())!==-1){continue}if(b.addedNodes.length>0||b.removedNodes.length>0&&!l){i.scan();l=true}if(b.addedNodes.length>0&&b.removedNodes.length>0){E[T].nodeUpdates.push(new NodeUpdate({rtime:o.offset(m),value:"",target:b.target,sequenceId:N}));N++}else{n=[];a=false;if(b.addedNodes.length>0){for(var C=0;C<b.addedNodes.length&&!a;C++){if(f(_,b.addedNodes[C].nodeName.toLowerCase())!==-1){continue}if(b.addedNodes[C].nodeName.toLowerCase()==="input"&&b.addedNodes[C].attributes.type==="hidden"){continue}if(b.addedNodes[C].nodeType===8&&!t.get("captureComments")){continue}if(b.addedNodes[C].nodeType===3){if(!d(E[T].nodeAdditions,"node",b.target)){E[T].nodeUpdates.push(new NodeUpdate({rtime:o.offset(m),value:"",target:b.target,sequenceId:N}));N++;a=true;C=b.addedNodes.length}}else{if(b.addedNodes[C].__ur_uuid__){}if(b.addedNodes[C].nodeName.toLowerCase()==="img"){if(t.isPageExcluded(b.addedNodes[C].src)){continue}}if(b.addedNodes[C].nodeName.toLowerCase()==="iframe"){if(t.isPageExcluded(b.addedNodes[C].src)){continue}}var S=G(b.addedNodes[C]);n.push(new NodeAddition({rtime:o.offset(m),target:b.target,sequenceId:N,node:b.addedNodes[C],value:"",mode:S,ref:S===2?b.addedNodes[C].nextElementSibling:b.target}));N++}}if(!a){E[T].nodeAdditions=E[T].nodeAdditions.concat(n)}}else{n=[];a=false;for(var x=0;x<b.removedNodes.length&&!a;x++){if(f(_,b.removedNodes[x].nodeName.toLowerCase())!==-1){continue}if(b.removedNodes[x].urNode&&b.removedNodes[x].urNode.stateChanges.excluded){continue}if(b.removedNodes[x].nodeName.toLowerCase()==="input"&&b.removedNodes[x].attributes.type==="hidden"){continue}if(b.removedNodes[x].nodeType===8){continue}if(b.removedNodes[x].nodeType===3){E[T].nodeUpdates.push(new NodeUpdate({rtime:o.offset(m),value:"",target:b.target,sequenceId:N}));N++;a=true;x=b.removedNodes.length}else{n.push(new NodeRemoval({rtime:o.offset(m),target:b.target,sequenceId:N,node:b.removedNodes[x]}));N++}}if(!a){E[T].nodeRemovals=E[T].nodeRemovals.concat(n)}}}break;case"attributes":if(b.attributeName==="style"){b.attributeValue=b.target.style.cssText}else if(I[b.attributeName]){b.attributeValue=b.target[I[b.attributeName]]}else{b.attributeValue=b.target.getAttribute(b.attributeName)}if(b.attributeValue==b.oldValue||b.attributeValue===b.oldValue){continue}if(f(_,b.target.nodeName.toLowerCase())!==-1||f(u,b.attributeName)!==-1||b.target.urNode.stateChanges.excluded){continue}if(b.target.nodeName.toLowerCase()==="input"&&b.target.attributes.type==="hidden"){continue}if(b.attributeName.match(/((x|data)-)?ng[(-|_|:)](bind|click|if|model|form|repeat|value|switch)(-(html|template|options|when))?/)){continue}if(b.target.urNode&&b.target.urNode.formField&&b.attributeName==="value"&&t.get("synthesizeScriptingChangeEvents")){c=new w("change");if(c){c.dispatch(b.target);c=null;continue}}if(b.attributeName==="checked"||b.attributeName==="selected"){continue}h=b.target.urNode.captureTriggers.attrchange;for(var P=0;P<h.length;P++){if(h[P].criteria&&h[P].criteria.name.test(b.attributeName)&&h[P].criteria.value.test(b.attributeValue)){s.fireTrigger(h[P],b.target);p=true}}if(!p){E[T].attributeChanges.push(new NodeAttributeChange({attribute:b.attributeName,value:b.attributeName==="value"?b.target.value:b.attributeValue,rtime:o.offset(m),target:b.target,sequenceId:N}))}p=false;N++;break;case"characterData":b.target.urNode.value=b.target.nodeValue;E[T].nodeUpdates.push(new NodeUpdate({rtime:o.offset(m),target:b.target.parentElement,value:"",sequenceId:N}));N++;break}}}}e.on("state:change",V);e.on("prop:change",function(e){});if(t.get("pauseOnResize")){e.on("resize:started",P.pause.bind(P));e.on("resize:ended",P.restart.bind(P))}e.on("navigation:page:unloading",function(){if(t.get("captureMode")===r.captureMode.SIMPLE){i.scan(document.body);var e=new NodeAttributeChange({target:document.body,rtime:o.offset((new Date).getTime()),attribute:"ur-nodeupdate",value:i.toString(document.body)});new O(e)}});e.on("state:change:trigger",function(e){var t;var r;var n;var a=e.node?[e.node]:document.querySelectorAll(e.selectors);for(var s=0,u=a.length;s<u;s++){var c=a[s];i.scan(c);switch(e.attributeName){case"ur-nodeupdate":t=i.toString(c);break;case"style":t=v(c);r=c.urNode.stateChanges.lastKnownStyle||null;if(t===r){return}c.urNode.stateChanges.lastKnownStyle=t;break;default:t=e.value||c.value;break}n=new NodeAttributeChange({target:c,rtime:o.offset((new Date).getTime()),attribute:e.attributeName,value:t});new O(n)}});e.on("event:trigger:text",function(e){var t=function(){var t;var r=document.createElement("div");r.setAttribute("data-ur-text",e.string);r.style.display="none";t=new NodeAddition({rtime:o.offset((new Date).getTime()),target:document.body,node:r,mode:1,ref:document.body});new A(t)};if(e.delay>0){window.setTimeout(t,e.delay)}else{t()}});e.on("state:observers:disconnect",function(){P.disconnectObservers()});e.on("state:observers:connect",function(){P.connectObservers()});return P}(coreEventtarget,coreConfig,varConstants,coreCapture,domDomutils,domPagemapping,domTriggermanager,utilsRtime,utilsNumberformat,utilsUtf16,utilsExtract,utilsExtend,utilsIndexof,utilsPrototype,utilsSort,utilsToarray,utilsGetcomputedstyle,statechangeObservers,eventEvent,eventTypes,eventSynth);coreNewstep=function(e,t){function r(r){e.fire("state:observers:disconnect");t.flush();window.setTimeout(function(){t.reset();e.fire("transport:sequence:reset");e.fire("capture:page:newstep",r);e.fire("state:observers:connect")},0);return true}return r}(coreEventtarget,eventCache);eventHistory=function(e,t,r){function n(e){if(e.url!==t.currentUri){r(e.url||document.URL)}}return n}(coreEventtarget,corePage,coreNewstep);utilsIsquerystr=function(e){if(typeof e.match==="function"){return e.match(/(\S=\S&?)+/)}return false};triggerCapturetrigger=function(e){var t=0;function r(e){this.id=t++;this.type=e.type;this.mode=e.mode;this.selectors=e.selectors;this.delay=e.delay;this.criteria=function(e){var t=e;if(e instanceof RegExp){t={name:e,value:new RegExp(".*")}}return t}(e.criteria)}r.prototype.fire=function(){var t;switch(this.mode){case"html":t="ur-nodeupdate";break;case"style":t="style";break}window.setTimeout(function(){e.fire("state:change:trigger",{attributeName:t,selectors:this.selectors})}.bind(this),this.delay)};return r}(coreEventtarget);eventXhr=function(e,t,r,n,i,a,s){var o=1,u=2,c=3,d=4,l="responseText excluded from capture",f="responseText is excluded from capture when plain text is returned",h="request body is excluded when in plain text without any white listing rules",p="responseText was not available in it's current format",g="responseType was not available in it's current format";function v(){var e=this;switch(e.readyState){case o:e.corePayload.requestHeaders=[];break;case u:e.corePayload.responseHeaders=e.getAllResponseHeaders()||"";e.corePayload.status=e.status;break;case c:e.corePayload.responseStart=(new Date).getTime();break;case d:try{e.corePayload.responseText=e.responseText;e.corePayload.responseType=e.responseType}catch(t){e.corePayload.responseText=p;e.corePayload.responseType=g}e.corePayload.responseEnd=(new Date).getTime();if(!t.get("passiveCapture")){m.call(e.corePayload);window.setTimeout(function(){r.xhr(e.corePayload)})}if(e.uploadTriggers){window.setTimeout(function(){r.page.call()},e.uploadTriggers.pause)}if(e.captureTriggers){for(var n=0;n<e.captureTriggers.length;n++){e.captureTriggers[n].fire()}}break}}function m(){var e;if(t.isXhrResponseTextExcluded()){this.responseText=this.responseText===p?p:l}else{try{e=JSON.parse(this.responseText);e=n.scrubObject(e,"responseText");this.responseText=JSON.stringify(e)}catch(e){if(!t.get("allowXhrPlainTextResponses")){this.responseText=f}}}}function y(){var t=false,r=this.data,a;if(r&&r.length>0&&i(r)){try{r=decodeURIComponent(r);t=r!==this.data}catch(t){e.fire("error:raise",t,"event/xhr::processRequestBody")}this.data=n.scrubPostParams(r,t)}else{try{a=JSON.parse(this.data);a=n.scrubObject(a,"requestBody");this.data=JSON.stringify(a)}catch(e){this.data=h}}}return{bind:function(){if(t.get("captureXhr")){XMLHttpRequest.prototype.nativeOpen=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.nativeSend=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.nativeSetRequestHeader=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.open=function(){var r=[];var n=arguments[1];if(typeof n==="object"){try{n=n.href}catch(e){n=null}}if(a(n)){this.corePayload={method:arguments[0],target:n};this.uploadTriggers=t.getUploadTriggers("xhr",this.corePayload.target);r=t.getXhrEventTrigger(this.corePayload.target);if(r.length>0){this.captureTriggers=[];for(var i=0;i<r.length;i++){this.captureTriggers.push(new s(r[i].capture))}}this.addEventListener("readystatechange",v,false)}try{return this.nativeOpen?this.nativeOpen.apply(this,arguments):this.open.apply(this,arguments)}catch(t){e.fire("error:raise",t,"xhr open() method could not be found")}};XMLHttpRequest.prototype.send=function(){if(typeof this.corePayload!=="undefined"){this.corePayload.data=arguments[0];this.corePayload.requestStart=(new Date).getTime();y.call(this.corePayload)}try{if(typeof this.nativeSend!=="undefined"){this.nativeSend.apply(this,arguments)}else{this.send.apply(this,arguments)}}catch(t){e.fire("error:raise",t,"xhr send() method could not be found")}};window.XMLHttpRequest.prototype.setRequestHeader=function(){try{if(typeof this.nativeSetRequestHeader!=="undefined"){this.nativeSetRequestHeader.apply(this,arguments)}else{this.setRequestHeader.apply(this,arguments)}}catch(t){e.fire("error:raise",t,"xhr nativeSetRequestHeader() failed")}}}}}}(coreEventtarget,coreConfig,coreCapture,scrubbingManager,utilsIsquerystr,utilsIsstring,triggerCapturetrigger);eventBindings=function(e,t,r,n,i,a,s,o,u,c,d,l,f,h,p,g,v,m,y){var b=[];var w={init:function(){var n;var s
;if(t.get("captureStateChanges")&&t.get("stepsOnHistoryChange")){n=window.history.pushState;history.pushState=function(e,t,r){new m({state:e,url:r});return n.apply(history,arguments)};if(!t.get("ignoreReplaceState")){s=history.replaceState;history.replaceState=function(e,t,r){new m({state:e,url:r});return s.apply(history,arguments)}}window.addEventListener("popstate",function(e){new m(e)},false)}if(t.get("captureEvents")){if(t.get("captureMode")===r.captureMode.DEFAULT){if(t.get("mouseMovementSampleRate")>-1){document.addEventListener("mousemove",a(d.bindings.move,t.get("mouseMovementSampleRate")),true)}document.addEventListener("scroll",a(l.fire,t.get("windowScrollSampleRate")),false);window.addEventListener("resize",g.bind,false);document.addEventListener("click",d.bindings.click,true)}e.on("dom:add:formfield",function(e){var n=e.urNode;if(typeof e==="undefined"){return}if(t.get("captureMode")===r.captureMode.DEFAULT){e.addEventListener("focus",u.bindings.focus,false);e.addEventListener("blur",u.bindings.blur,false);e.addEventListener("change",u.bindings.change,false);e.addEventListener("keypress",u.bindings.keypress,false);e.addEventListener("keydown",u.bindings.keydown,false);if(t.get("detectPropChanges")){n.observePropChanges.call(e,"value");n.observePropChanges.call(e,"disabled");n.observePropChanges.call(e,"selected");n.observePropChanges.call(e,"checked")}}})}if(t.get("captureXhr")&&!t.get("passiveCapture")){y.bind()}if(t.get("captureForms")&&!t.get("passiveCapture")){e.on("dom:add:form",function(e){if(typeof e==="undefined"){return}if(i(b,e)===-1){e.addEventListener("submit",c.init,true);e.nativeSubmit=e.submit;if(t.get("bindToOnSubmit")===true){e.onsubmit=e.submit}e.submit=function(){c.init.call(this,{target:this});if(!this.defaultPrevented){this.nativeSubmit()}};b.push(e)}})}h.init();p.init()}};return w}(coreEventtarget,coreConfig,varConstants,varIframes,utilsIndexof,utilsThrottle,sessionInstance,eventSynth,eventFormfield,eventSubmit,eventMouse,eventScroll,eventTouch,eventLoad,eventUnload,eventResize,eventState,eventHistory,eventXhr);core=function(e,t,r,n,i,a,s,o,u,c,d,l,f,h,p,g,v){var m="2.11.0";var y="\n";var b;var w;var E={top:{cookie:false,referrer:false,fpath:false},child:{cookie:false,rtime:false,ptoken:false,referrer:false,fpath:false}};var C=d.engineState;var S=C.INACTIVE;var T=false;var N=false;r.on("error:raise",e.raiseErr);r.on("beacon:fire",e.fireBeacon);r.on("session:expired",function(){S=C.EXPIRED});r.on("dom:source-captured",function(){N=true});r.on("storage:ready",function(){r.fire("capture:ready",C.READY);if(u.ready){i.readTransportCache()}});r.on("capture:ready",I);r.on("readystate:changed",x);r.on("storage:error",function(){S=b.setState(C.INACTIVE);r.fire("beacon:fire")});function x(e){var t=u.isTop?"top":"child";for(var n in e){if(e.hasOwnProperty(n)){E[t][n]=true}}for(var a in E[t]){if(E[t].hasOwnProperty(a)){if(!E[t][a]){return}}}r.fire("instance:ready",true);if(i.ready){i.readTransportCache()}}function I(){b.setState(d.engineState.READY);if(w&&typeof w.fn==="function"){w.fn.apply(w.context,w.args)}}function _(){var e=document.getElementsByTagName("base");for(var t=0;t<e.length;t++){for(var r=0;r<e[t].attributes.length;r++){if(e[t].attributes[r].name==="userreplay"){return true}}}return false}b={ready:function(e,t){var r=arguments.length>2?Array.prototype.slice.apply(arguments,2):null;if(e&&typeof e==="function"){t=t||this;w=new l(e,t,r)}return this},timeStarted:function(){var e=(new Date).getTime();return function(){return e}}(),getVersion:function(){return m},getState:function(){return S},isDebug:function(){return g(y).length>0},pageCaptured:function(){return N},storageReady:function(){return T},isReady:function(){return S===C.READY},setState:function(e){if(e===C.INACTIVE||e===C.READY||e===C.INITIALISING||e===C.BUSY){S=e}else{r.fire("error:raise","Invalid state for setState method in core: "+e)}return this},init:function(e){if(urCapture.state()!==C.INACTIVE){return false}if(!e.id||!e.server){this.setState(C.INACTIVE);return false}t.set("version",m);if(_()){this.setState(C.INACTIVE);return false}if(this.isDebug()&&u.isTop){y=y.replace(/ {2,}/g,"");y=y.replace(/\(newline\)/g,"\n")}S=this.setState(C.INITIALISING);if(t.isSimpleCaptureModeEnabled()||p.isIE()&&t.get("useIECapture")){t.set("captureMode",d.captureMode.SIMPLE)}else{if(t.get("captureStateChanges")){h.init();r.on("dom:content:loaded",h.connectObservers.bind(h))}}i.init();u.init();n.set();s.registerFunction("registerChildInstanceUrl",c.registerChildInstanceUrl);s.registerFunction("initChildInstance",c.initChildInstance);s.registerFunction("fireEvent",r.fire);s.registerFunction("flushTransportCache",i.flushTransportCache);s.registerFunction("saveCookie",n.save);s.registerFunction("storageLoaded",i.load);if(!p.isSupported()){S=this.setState(C.INACTIVE);r.fire("beacon:fire");return false}if(t.isBeaconRequest(document.URL)){this.setState(C.INACTIVE);r.fire("beacon:fire");return false}if(t.get("dnt")&&(navigator.doNotTrack==="yes"||navigator.doNotTrack==="1"||navigator.msDoNotTrack==="1")){this.setState(C.INACTIVE);return false}if(t.isPageExcluded(document.URL)){this.setState(C.INACTIVE);return false}o.signal();v.init();f.init();return this}};return b}(coreErrorhandler,coreConfig,coreEventtarget,coreCookie,coreStorage,coreTransport,coreMessaging,coreCapture,sessionInstance,sessionSession,varConstants,varCallback,eventBindings,eventState,utilsUseragent,utilsTrim,scrubbingManager);domPageupload=function(e){return function(t){var r={type:"pageupload"};e.page.call(r,t)}}(coreCapture);formfieldValidation=function(e,t,r,n,i){var a="formfield/validation";return{registerSuccess:function(r,s){var o,u,c,d,l;try{o=i.output();u=20;if(typeof s!=="boolean"){return}s=s?1:0;c=n.strLen(r.length);d=n.strLen([u,c,r,s].join("").length);l=[o,d,u,c,r,s].join("");t.write(l)}catch(t){e.fire("error:raise",t,a+"::registerSuccess")}}}}(coreEventtarget,eventCache,coreConfig,utilsNumberformat,utilsRtime);eventManualflag=function(e,t,r,n,i,a,s,o){var u=function(n){r(s,n);function s(e,r){this.eventType=i.id(o.MANUALFLAG);this.rto=t.output();this.flagId=i.flagId(e);this.content=r||"";this.generatePayload();n.call(this)}s.prototype.generatePayload=function(){try{var t=i.strLen(a.getUtf8Bytes(this.content));this.payload=[this.flagId,t,this.content]}catch(t){e.fire("error:raise",t,"manualflag::ManualFlagEvent")}};return s}(s);return u}(coreEventtarget,utilsRtime,utilsExtend,utilsTrim,utilsNumberformat,utilsUtf16,eventEvent,eventTypes);triggerFlagtrigger=function(e,t){function r(e){this.type=e.type;this.flagId=e.flagId;this.content=e.content;this.delay=e.delay;this.criteria=function(e){var t=e;if(e instanceof RegExp){t={name:e,value:new RegExp(".*")}}return t}(e.criteria)}r.prototype.fire=function(){new t(this.flagId,this.content)};return r}(coreEventtarget,eventManualflag);triggerTexttrigger=function(e){function t(e){this.string=e.string;this.delay=e.delay}t.prototype.fire=function(){e.fire("event:trigger:text",{string:this.string,delay:this.delay})};return t}(coreEventtarget);urcapture=function(e,t,r,n,i,a,s,o){if(window.urCapture&&window.UrConfig){return}var u={init:function(){return function(t){if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){var t=(this.document||this.ownerDocument).querySelectorAll(e);var r=t.length;while(--r>=0&&t.item(r)!==this){}return r>-1}}e.init.call(e,t)}}(),ready:e.ready,version:function(){var t=e.getVersion();return t}(),pageToken:e.pageToken,pageCaptured:e.pageCaptured,isReady:e.isReady,isDebug:e.isDebug,pageUpload:r,createNewStep:o,formValidation:n,getConfig:function(){return t.get()},state:function(){return e.getState()}};u.triggers={createCaptureTrigger:function(e,t,r,n,a){return new i({type:e,mode:t,selectors:r,delay:n,criteria:a||null})},createEventTrigger:function(e,t,r,n,i){return new a({type:e,flagId:t,content:r,delay:n,criteria:i||null})},createTextTrigger:function(e,t){return new s({string:e,delay:t})}};window.urCapture=u;window.UrConfig=t.constructor}(core,coreConfig,domPageupload,formfieldValidation,triggerCapturetrigger,triggerFlagtrigger,triggerTexttrigger,coreNewstep)})();}());